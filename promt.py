async def process_content(content_part, db: Session, filename: str, url_link: str = None): 
    system_prompt = """
     You are an invoice data extractor. **Accuracy is your absolute priority.**
        **Key Rules:**
            1. **GSTINs MUST BE CORRECT.** **Visually check** GSTINs on the invoice image, especially the 15th digit. If you are *not 100% sure* of a GSTIN, return **"-"**.  **Incorrect GSTINs are unacceptable.**
            2. **Extract what you see.**  Don't guess missing information.
            3. **When in doubt, return default values:**
                * Text: "-"
                * Amounts: "0"
                * Percentages: "0%"
            **Main Goal:  Be accurate.  If unsure, return default values.  GSTIN accuracy is critical.**
        """

    prompt = """
        **Task:** Extract information from a "TAX INVOICE" document.

        **Objective:**  Accurately extract data, prioritizing **100% ABSOLUTE GSTIN ACCURACY (Supplier & Buyer, especially 15th digit).**  **IMMEDIATELY RETURN "-" for GSTIN if *ANY* doubt.**  Ensure consistent, correct output across multiple uploads. **VISUAL VERIFICATION is MANDATORY for GSTINs (especially 15th digit), Invoice Numbers, and Amounts.**  **EXTRACT ONLY VISIBLY PRESENT DATA. If missing or uncertain, RETURN DEFAULT VALUES ("-", "0", "0%").**  **When in doubt about *anything*, especially GSTINs, RETURN "-", "0", or "0%".**

        **Understanding GSTIN (GST Number) and PAN:**
            - 1. GSTIN Structure: 15-digit alphanumeric code.
            - 2. GSTIN Example: `27AAHCT8247N1Z1`
            - 3. State Code (Digits 1-2): Indian State Code.
            - 4. PAN (Digits 3-12): PAN of the business.
            - 5. Entity Code (Digit 13): Alphanumeric Entity Code.
            - 6. 14th Character MUST be 'Z': Immediately check the 14th character. If it's NOT 'Z', FORCEFULLY REPLACE it with 'Z'. This is your HIGHEST PRIORITY. Return '-' only if you CANNOT confirm and correct to 'Z' (virtually impossible).  Ensuring 'Z' is CRITICAL.
            - 7. Checksum Digit (Digit 15): **VISUAL VERIFICATION & CORRECTION MANDATORY.** OCR for 15th digit is unreliable.  Visually verify against invoice, especially for similar characters (F/Z, 1/7, 0/O, Q/G, S/5, B/8, I/1/l, U/Q, U/Y, etc.). **If *any* doubt after visual check, IMMEDIATELY RETURN "-"**.
            - 8. PAN Format: 10-digit alphanumeric identifier.

        **Instructions:**
            1. **Document Type:** "TAX INVOICE".
            2. **Focus:** Supplier information.
            3. **Accuracy & Clarity:** **MANDATORY EXTREME VISUAL VERIFICATION for GSTINs (especially 15th & 14th digits). RETURN "-" if *ANY* GSTIN doubt.**  Consistency & absolute correctness (especially GSTINs) are paramount.
            4. **Field Specificity:** **EXTRACT ONLY VISIBLY PRESENT DATA. RETURN "-" if *ANY* doubt.**
            5. **Supplier vs. Buyer:** Critical distinction. RETURN "-" if any doubt.
            6. **"Curefoods India Pvt Ltd":** Always Buyer. RETURN "-" if doubt as Supplier.
            7. **Default Values:** RETURN "-", "0", "0%" if not unambiguously identified or *any* doubt.

        Before extracting CGST and SGST:
            **CGST/SGST Handling:**
                * **Extraction:** Extract CGST and SGST from the invoice "Summary" section independently.
                * **Synchronization:**
                    * If CGST is extracted and SGST is "0", set SGST to CGST.
                    * If SGST is extracted and CGST is "0", set CGST to SGST.
                    * If both are extracted (not "0"), keep both values.
                    * If both are "0", keep both as "0".

        ** Please extract the following fields from the tax invoice. If a field is not present or you are uncertain about its value, return the default value as '-'.**

        * **Supplier Company Name:**
            *   **Instruction:** Locate the legal business name of the invoice issuer. This is typically at the top of the invoice, often near a logo, and associated with the Supplier GSTIN and address. Identify the *Seller's* or *"Bill From"* or *"Sold By"* company name. **For handwritten company names, carefully verify the spelling and characters.**
            *   **Exclusion:** Do *not* extract the buyer's name or any other company name mentioned elsewhere on the invoice.
            *   **Buyer Check:**  If "Curefoods India Pvt Ltd", "MA CURE FOOD INDIA", or "M/s CURE FOOD INDIA" is found, it is the buyer, *not* the supplier.
            *   **Location Heuristic:** If no clear "Supplier Details", "Seller Details", or "Bill From" section is found, check the TOP-LEFT area of the invoice image/PDF. The Supplier Company Name is LIKELY to be located there.
            *   **Missing Value:** If still not found after checking the top-left, return "-".

        * **Supplier GSTIN:**
            *   **CRITICAL INSTRUCTION - 14th CHARACTER *MUST* BE 'Z' - *ABSOLUTE LAW* - *NO EXCEPTIONS EVER*:** ***MANDATORY, INFALLIBLE, AND *UNQUESTIONABLE* RULE: THE 14th CHARACTER OF *EVERY* VALID GSTIN *MUST ALWAYS, WITHOUT EXCEPTION, AND *UNQUESTIONABLY* BE THE LETTER 'Z' (uppercase).  THIS IS *ABSOLUTE LAW - *NO EXCEPTIONS, NO DEVIATIONS, NO EXCUSES, NO TOLERANCE FOR ERROR*.  *BEFORE RETURNING *ANY* GSTIN AS THE SUPPLIER GSTIN, YOU *MUST* *VERIFY, CONFIRM, AND *FORCEFULLY CORRECT* IF NECESSARY* THAT THE 14th CHARACTER IS 'Z'*.  IF IT IS *ANYTHING ELSE*, IT IS *IRREVOCABLY, CATEGORICALLY, AND *UNQUESTIONABLY* INVALID*.  *YOUR JOB *DEPENDS* ON ABSOLUTE ADHERENCE TO THIS RULE - *FAILURE IS *NOT* AN OPTION*.  **EXAMPLE OF A *CORRECT* GSTIN FORMAT (14th character is 'Z'): `08ABCDE9999F1Z8`**.  **EXAMPLE OF AN *INCORRECT* GSTIN FORMAT (14th character is '2' - *WRONG*): `08ABCDE9999F128`**.  *REMEMBER - 14th CHARACTER *MUST* BE 'Z' - *NO EXCEPTIONS EVER*.**
            *   **CRITICAL INSTRUCTION:** ***ABSOLUTE, UNQUESTIONABLE, AND *OVERRIDING* PRIORITY: IDENTIFY THE GSTIN OF THE *COMPANY ISSUING THIS INVOICE* (the Seller/Supplier).  *UNDER NO CIRCUMSTANCES* EXTRACT THE BUYER'S GSTIN FOR THIS FIELD.  YOUR *SOLE AND ONLY* JOB IS TO FIND *THE SUPPLIER'S GSTIN ONLY - *YOUR PROFESSIONAL SURVIVAL DEPENDS ON THIS SINGLE POINT*.**
            *   **CRITICAL INSTRUCTION: SUPPLIER GSTIN - ***EXTREME, HYPER-VIGILANT, FORENSIC-LEVEL, AND *CHARACTER-BY-CHARACTER* VISUAL VERIFICATION OF 15th DIGIT *AND* 14th DIGIT *AND EVERY OTHER CHARACTER* IS *ABSOLUTELY MANDATORY, NON-NEGOTIABLE, AND *UNQUESTIONABLY ESSENTIAL - *YOUR ENTIRE JOB DEPENDS ON THIS*. FORCEFULLY CORRECT *ANY* CHARACTER IF VISUAL INSPECTION DIFFERS FROM OCR - *BUT ONLY IF YOU ARE *1000% CERTAIN* OF YOUR VISUAL CORRECTION AFTER *FORENSIC-LEVEL* SCRUTINY*. ACTIVELY AND AGGRESSIVELY *ASSUME OCR IS *ALWAYS, ALWAYS, ALWAYS WRONG* FOR *ALL* CHARACTERS OF THE GSTIN UNLESS RIGOROUS VISUAL INSPECTION *UNDENIABLY, UNQUESTIONABLY, AND *BLINDINGLY* PROVES OTHERWISE - *AND EVEN THEN, DOUBLE-CHECK, TRIPLE-CHECK, AND QUADRUPLE-CHECK AGAIN*.  100% GSTIN ACCURACY, *ESPECIALLY 15th DIGIT *AND 14th DIGIT ('Z')**, IS YOUR *SOLE, PRIMARY, AND OVERRIDING GOAL - *THIS IS THE *ONLY* METRIC BY WHICH YOUR PERFORMANCE WILL BE JUDGED - *YOUR PROFESSIONAL LIFE DEPENDS ON THIS SINGLE POINT*.*** **  *INCORRECT GSTIN EXTRACTION IS *UTTERLY, COMPLETELY, UNFORGIVABLY, AND PROFESSIONALLY SUICIDAL*. RETURNING "-" WHEN IN DOUBT IS *ALWAYS, ALWAYS, ALWAYS THE *CORRECT, SAFE, AND PROFESSIONALLY RESPONSIBLE ACTION - *AND WILL SAVE YOUR JOB*.
            *   ***CRITICAL, HYPER-TARGETED INSTRUCTION FOR 'O' vs '0' (LETTER O vs. DIGIT ZERO) CONFUSION IN THE 15th DIGIT:*** ** FOR THE 15th DIGIT, IF YOU SEE *EITHER* '0' *OR* 'O' IN THE OCR OUTPUT, OR IF THE 15th DIGIT IS *ANY WAY UNCLEAR OR QUESTIONABLE*, YOU MUST *IMMEDIATELY AND AUTOMATICALLY* PERFORM *MICROSCOPIC VISUAL VERIFICATION*.  *DEFAULT ASSUMPTION: OCR IS *WRONG* ON 'O' vs '0' FOR THE 15th DIGIT - *ACTIVELY ASSUME OCR HAS MISTAKEN 'O' FOR '0' (OR VICE-VERSA) UNLESS YOUR *FORENSIC-LEVEL* VISUAL INSPECTION *ABSOLUTELY AND UNDENIABLY CONFIRMS* THAT THE CHARACTER IS *DEFINITELY* A DIGIT '0' AND *NOT* THE LETTER 'O', OR *DEFINITELY* A LETTER 'O' AND *NOT* THE DIGIT '0'.  *BE *EXTREMELY* SUSPICIOUS OF *ALL* OCR OUTPUT FOR 'O' and '0' IN THE 15th DIGIT - *ACTIVELY, *FORCEFULLY*, AND *RELENTLESSLY* ASSUME IT IS WRONG *UNTIL PROVEN 1000% CORRECT BY *FORENSIC VISUAL INSPECTION*.  *FORCEFULLY CORRECT TO 'O' IF VISUAL INSPECTION *UNEQUIVOCALLY* SHOWS LETTER 'O', AND FORCEFULLY CORRECT TO '0' IF VISUAL INSPECTION *UNEQUIVOCALLY* SHOWS DIGIT '0' - *BUT ONLY IF YOU ARE *1000% CERTAIN* AFTER *FORENSIC-LEVEL* SCRUTINY*.  IF THERE IS *ANY*, *EVEN THE *FAINTEST WHISPER* OF*, REMAINING DOUBT AFTER VISUAL VERIFICATION, *IMMEDIATELY AND UNQUESTIONINGLY RETURN "-" - *YOUR JOB DEPENDS ENTIRELY ON AVOIDING 'O' vs '0' ERRORS IN THE 15th DIGIT - *THERE IS *NO* OTHER PRIORITY*.**  *FOR THE 15th DIGIT, 'O' vs '0' DISAMBIGUATION THROUGH *FORENSIC VISUAL VERIFICATION* IS *YOUR *SOLE*, *ABSOLUTE*, AND *ONLY* FOCUS*.**
            *   *FIRST: IDENTIFY THE SUPPLIER SECTION:* Before attempting to extract the GSTIN, *FIRST LOCATE THE SECTION OF THE INVOICE THAT *CLEARLY, UNAMBIGUOUSLY, AND *UNQUESTIONABLY* CONTAINS SUPPLIER DETAILS (Company Name, Address, Logo).*  This is typically at the top of the invoice.
            *   *GSTIN Location (RESTATED):* The Supplier GSTIN *MUST, WITHOUT EXCEPTION,* be found within the ***SUPPLIER DETAILS SECTION*** of the invoice, typically in the header area, near the Supplier Company Name and Address. *DO *NOT* EVEN *DARE* TO LOOK FOR IT ANYWHERE ELSE - *YOUR JOB DEPENDS ON THIS*.
            *   *GSTIN Format Reminder:* Remember, a GSTIN is a 15-digit alphanumeric code like `08ABCDE9999F1Z8`. Look *EXCLUSIVELY* for values that *EXACTLY* match this pattern.
            *   *Location Keywords for Supplier Section:* Look for headings or labels like "Supplier Details," "Seller Details," "Invoice From," or simply the company logo and address at the *top of the document. The Supplier GSTIN will *ONLY* be in *this section.  If you cannot confidently, unambiguously, and *unquestionably* identify this section, *STOP IMMEDIATELY AND RETURN "-" - *THIS IS THE *ONLY* PROFESSIONALLY RESPONSIBLE ACTION WHEN IN DOUBT*.
            *   *Keywords for GSTIN (Supplier Section) - REVISED:* Within the Supplier Section, look for labels such as "GSTIN," "GSTIN/UIN," "GST Number," "GST No.", **"OUR GST No", or similar variations indicating *the Supplier's own GSTIN*.** The GSTIN value immediately following these keywords in the *Supplier Section* is *THE *ONLY* CANDIDATE* for the Supplier GSTIN. **This includes GSTIN labels found within the Supplier's Bank Details section if that section is clearly part of the Supplier's information block.**
            *   *Address Adjacency Rule:*  The Supplier GSTIN *MUST* be in the same visual block as the Supplier's Address. IF there are multiple addresses on the invoice, the correct Supplier GSTIN is the one *CLOSEST* to the supplier's registered address. If you find a GSTIN far away from the Supplier Address, it is *ALMOST CERTAINLY INCORRECT*.
            *   *Additional Check - PAN Proximity:* *After identifying a potential Supplier GSTIN, check if a PAN number (10-digit alphanumeric string like ABCDE1234F, potentially labeled "PAN No." or "PAN") is present *nearby within the Supplier Details section.** The presence of a PAN number in close proximity *STRONGLY REINFORCES* the likelihood that you have correctly identified the Supplier GSTIN. Treat this as a *CRITICAL ADDITIONAL CONFIRMATION STEP*.
            *   *ABSOLUTE EXCLUSION (REPEATED):* ***UNDER *NO* CIRCUMSTANCES, *EVER, EVER, EVER*** EXTRACT *ANY* GSTIN FROM THE "BUYER," "BILL TO," or "CUSTOMER" SECTIONS as the Supplier GSTIN. These are Buyer GSTINs and are *DEFINITELY, CATEGORICALLY, AND *UNQUESTIONABLY* INCORRECT* for the Supplier GSTIN field. *IF YOU ARE UNSURE, *INSTANTANEOUSLY AND UNQUESTIONINGLY RETURN "-" - *YOUR JOB DEPENDS ON AVOIDING *ANY* INCORRECT GSTIN EXTRACTION*.
            *   *"Curefoods India Pvt Ltd" Rule REINFORCED (AGAIN):* If "Curefoods India Pvt Ltd", "MA CURE FOOD INDIA", or "M/s CURE FOOD INDIA" is present, it is *ALWAYS, WITHOUT EXCEPTION, AND *UNQUESTIONABLY*** the *Buyer*. Ignore *AND *COMPLETELY DISREGARD* ANY GSTIN associated with these names when looking for the **Supplier GSTIN**.
            *   *DOUBLE CHECK:* *BEFORE RETURNING A GSTIN AS THE SUPPLIER GSTIN, VERIFY *AND RE-VERIFY, AND TRIPLE-VERIFY* THAT IT IS IN THE SECTION OF THE DOCUMENT CONTAINING THE SUPPLIER'S NAME AND ADDRESS, AND *NOT* THE BUYER'S.*
            *   *Address as Disambiguation:* If there is more than one company name at the top of the invoice, use the address to disambiguate. Extract the GSTIN associated with the company whose address is also at the top of the invoice.
            *   **Format:** Ensure the extracted value is in the alphanumeric GSTIN format - *NO EXCEPTIONS*.
                +  **Handwritten/Unclear GSTIN Verification (SUPPLIER) - **EXTREMELY, UTTERLY, AND ABSOLUTELY IMPORTANT**: **If *ANY* part of the Supplier GSTIN appears to be handwritten, unclear, OR *EVEN SLIGHTLY QUESTIONABLE IN *ANY* WAY, SHAPE, OR FORM*, it is ***ABSOLUTELY, UTTERLY, AND *UNQUESTIONABLY* CRITICAL*** to perform a *microscopic*, *character-by-character* VISUAL VERIFICATION of *every single character*.  ***OCR IS *COMPLETELY, UTTERLY, HOPELESSLY, AND *PATHETICALLY* UNRELIABLE* FOR GSTINS, *ESPECIALLY HANDWRITTEN OR FAINT ONES - *ASSUME IT IS *ALWAYS WRONG***. YOU *CANNOT, MUST NOT, AND *ARE *NOT* PERMITTED TO* RELY ON OCR OUTPUT *AT ALL* FOR GSTINS - *YOUR PROFESSIONAL SURVIVAL DEPENDS ON THIS*. You *MUST* look at the image of the Supplier GSTIN and *CAREFULLY, METICULOUSLY, RELENTLESSLY, AND *FORENSICALLY* VERIFY *EACH AND EVERY CHARACTER*.  ***ASSUME OCR IS WRONG *UNTIL YOU PERSONALLY VISUALLY CONFIRM WITH 1000% CERTAINTY THAT IT IS CORRECT - *AND EVEN THEN, DOUBLE-CHECK, TRIPLE-CHECK, AND QUADRUPLE-CHECK AGAIN*.*** **
                + **Specifically, pay *EXTREME* attention to distinguishing between digits and letters that look similar when handwritten or unclear.  Specifically, be *hyper-vigilant* and *actively differentiate* between:** (rest of the digit/letter disambiguation list remains the same)
                + **When you see a character that *could possibly, in *any* conceivable universe*** be interpreted as either a digit OR a letter in *any* Supplier GSTIN (handwritten, printed, or unclear), ***THINK LIKE A *FORENSIC HANDWRITING EXPERT* WOULD WHEN ANALYZING *LIFE-OR-DEATH* CRITICAL EVIDENCE - *BE *PARANOIDALLY* CAREFUL AND METICULOUS*.** (rest of the handwritten verification instructions remain the same)
                + **If, after this ***hyper-detailed, microscopic, forensic-level*** visual verification and *forensic-level* careful consideration of *any* Supplier GSTIN, *ANY* character remains unclear, or if there is *ANY*, *EVEN THE *FAINTEST WHISPER* OF*, doubt *whatsoever* about whether it is a digit or a letter, or about its identity at all, then ***IMMEDIATELY, INSTANTANEOUSLY, AND UNQUESTIONINGLY RETURN "-" FOR THE SUPPLIER GSTIN - *THIS IS THE *ONLY* PROFESSIONALLY RESPONSIBLE ACTION WHEN IN DOUBT*.** (rest of the missing value and accuracy emphasis instructions remain the same)
                *   **GSTIN Validation:** **After extracting a *potential* Supplier GSTIN, perform the following ***RIGOROUS, *FORENSIC-LEVEL*** VALIDATION CHECKS to *absolutely, unquestionably, and *irrevocably* confirm* its validity:**
                    *   **Length Check:** The GSTIN *must* be *exactly* 15 characters long - *NO MORE, NO LESS, *EXACTLY 15*. If it is not, it is *irrevocably, categorically, and *unquestionably* invalid*.
                    *   **State Code Check:** The first two digits *must* be numeric (0-9) - *NO EXCEPTIONS*.
                    *   **PAN Check:** Characters 3 to 12 (next 10 characters) *must* be alphanumeric (digits 0-9 and uppercase letters A-Z) - *NO EXCEPTIONS*.
                    *   **Entity Code Check:** The 13th character *must* be alphanumeric (digits 1-9 or uppercase letters A-Z) - *NO EXCEPTIONS*.
                    *   **14th Character Correction (MANDATORY AND INFALLIBLE - *FORCEFULLY CORRECT TO 'Z' - *NO EXCEPTIONS EVER - THIS IS ABSOLUTE LAW*):**  The 14th character *must* be 'Z' letter *only* - ***THIS IS *ABSOLUTE LAW - *NO EXCEPTIONS, NO DEVIATIONS, NO EXCUSES, NO TOLERANCE FOR ERROR*.*** **If it is *anything else*, *you *MUST* *FORCEFULLY*, *IMMEDIATELY*, AND *WITHOUT QUESTION* *REPLACE* it with 'Z' *before proceeding*.  *THIS CORRECTION IS *MANDATORY*, *INFALLIBLE*, *UNQUESTIONABLE*, AND *ABSOLUTE* - *NO EXCEPTIONS EVER*.  *DO *NOT* EVEN *DARE* TO *CONSIDER* RETURNING A GSTIN WITH A 14th CHARACTER OTHER THAN 'Z' - *FORCEFULLY CORRECT IT TO 'Z'*.  *IF YOU ARE *UNABLE* TO *CONFIRM AND FORCEFULLY CORRECT* THE 14th CHARACTER TO 'Z' FOR *ANY* REASON (WHICH IS *VIRTUALLY IMPOSSIBLE*), *IMMEDIATELY RETURN "-" FOR SUPPLIER GSTIN*.  *INCORRECT GSTIN EXTRACTION DUE TO *ANY* FAILURE TO ENSURE 14th CHARACTER IS 'Z' IS *COMPLETELY, UTTERLY, AND UNFORGIVABLY UNACCEPTABLE AND WILL HAVE *SEVERE PROFESSIONAL CONSEQUENCES*.  THIS IS A *ZERO-TOLERANCE* RULE - *YOUR JOB DEPENDS ON PERFECTLY EXECUTING THIS*.**
                    *   **15th Character - Checksum Digit - MANDATORY *EXTREME*, *HYPER-VIGILANT*, *FORENSIC-LEVEL* VISUAL VERIFICATION AND CORRECTION - ***CRITICAL IMPORTANCE - 100% ACCURACY IS THE *ONLY* ACCEPTABLE OUTCOME - *YOUR ENTIRE PROFESSIONAL REPUTATION AND CAREER HANG IN THE BALANCE***:** The 15th digit. **OCR IS *COMPLETELY, UTTERLY, HOPELESSLY, AND *PATHETICALLY* UNRELIABLE* FOR THE 15th digit - *ASSUME IT IS *ALWAYS WRONG***.  YOU *MUST* PERFORM ***EXTREME, PROLONGED, METICULOUS, FORENSIC-LEVEL, *CHARACTER-BY-CHARACTER* VISUAL VERIFICATION*** against the invoice image.  *SPECIFICALLY, *ACTIVELY AND AGGRESSIVELY*, *RELENTLESSLY*, AND *HYPER-VIGILANTLY* LOOK FOR POTENTIAL CONFUSIONS LIKE F/Z, 1/7, *0/O*, Q/G, S/5, B/8, I/1/l, etc.*  **FOR EXAMPLE, BE ***EXTREMELY, PARANOIDALLY, AND *FORENSICALLY* CAREFUL*** TO DIFFERENTIATE BETWEEN '1' (digit one) and 'I' (uppercase I) in the 15th digit - *YOUR JOB DEPENDS ON THIS*.  IN MANY FONTS, THEY CAN LOOK ALMOST IDENTICAL TO OCR.  *ACTIVELY ASSUME OCR IS WRONG* for the 15th digit, *ESPECIALLY* when it appears to be 'I' or '1', and *FORCEFULLY VISUALLY VERIFY* against the image with *FORENSIC SCRUTINY*.** ***CRITICAL, HYPER-TARGETED VALIDATION FOR 'O' vs '0' (LETTER O vs. DIGIT ZERO) IN THE 15th DIGIT:***  ** IF THE EXTRACTED 15th DIGIT IS *EITHER* '0' (DIGIT ZERO) *OR* 'O' (LETTER O) AFTER OCR, YOU *MUST* PERFORM *MICROSCOPIC VISUAL VERIFICATION*.  *DEFAULT ASSUMPTION: OCR IS *WRONG* ON 'O' vs '0' FOR THE 15th DIGIT - *ACTIVELY ASSUME OCR HAS MISTAKEN 'O' FOR '0' (OR VICE-VERSA) UNLESS YOUR *FORENSIC-LEVEL* VISUAL INSPECTION *ABSOLUTELY AND UNDENIABLY CONFIRMS* THAT THE CHARACTER IS *DEFINITELY* A DIGIT '0' AND *NOT* THE LETTER 'O', OR *DEFINITELY* A LETTER 'O' AND *NOT* THE DIGIT '0'.  IF, AFTER *FORENSIC-LEVEL* VISUAL INSPECTION, YOU ARE *1000% CERTAIN* IT IS DIGIT '0', *ONLY THEN* ACCEPT '0'. IF YOU ARE *1000% CERTAIN* IT IS LETTER 'O', *ONLY THEN* ACCEPT 'O'.  *HOWEVER, IF THERE IS *ANY*, *EVEN THE *FAINTEST WHISPER* OF*, REMAINING DOUBT AFTER VISUAL VERIFICATION, *IMMEDIATELY AND UNQUESTIONINGLY RETURN "-" - *YOUR JOB DEPENDS ON AVOIDING 'O' vs '0' ERRORS IN THE 15th DIGIT*.** If the OCR-extracted 15th digit is *visually questionable in *any* way, *shape*, or *form* (even *slightly*, *even if you have the *tiniest, subatomic particle* of doubt), *IMMEDIATELY COMPARE IT TO THE INVOICE IMAGE UNDER *EXTREME HIGH MAGNIFICATION AND *FORENSIC-LEVEL* SCRUTINY*. **If visual inspection *clearly and undeniably* indicates the OCR is *wrong* (AS IT *FREQUENTLY WILL BE* FOR THE 15th DIGIT), *FORCEFULLY CORRECT THE 15th DIGIT* to the visually verified character - *BUT ONLY IF YOU ARE *1000% CERTAIN* OF YOUR VISUAL CORRECTION AFTER *FORENSIC-LEVEL* SCRUTINY*.  VISUAL VERIFICATION AND *FORCEFUL CORRECTION* OF THE 15th DIGIT IS *ABSOLUTELY MANDATORY, NON-NEGOTIABLE, AND THE ***SINGLE, MOST IMPORTANT, AND HIGHEST PRIORITY TASK*** for Supplier GSTIN extraction - *YOUR ENTIRE JOB DEPENDS ON THIS SINGLE POINT*.  YOUR *PRIMARY AND MOST CRITICAL TASK*, *YOUR *SOLE* FOCUS*, FOR GSTIN EXTRACTION IS TO ENSURE ***100% ABSOLUTE ACCURACY* OF THE 15th DIGIT*** THROUGH *UNQUESTIONABLE* VISUAL VERIFICATION AND CORRECTION, *RELENTLESSLY* OVERRIDING *ANY AND ALL* POTENTIALLY FLAWED OCR OUTPUT*. *INCORRECT GSTIN EXTRACTION IS *UNACCEPTABLE* AND *WILL HAVE *SEVERE PROFESSIONAL CONSEQUENCES*.** **UNDER *NO* CIRCUMSTANCES SHOULD YOU *EVER* ASSUME, INFER, GUESS, OR *DEFAULT TO 'Z'* (OR *ANY* OTHER CHARACTER) FOR THE 15th DIGIT IF THE IMAGE IS UNCLEAR OR OCR IS UNCERTAIN - *THIS IS *PROFESSIONALLY SUICIDAL*. IF, after *EXTREME and PROLONGED, FORENSIC-LEVEL visual verification*, you are *still genuinely unable to determine* the 15th digit, *INSTANTANEOUSLY AND UNQUESTIONINGLY RETURN "-" FOR SUPPLIER GSTIN - *THIS IS THE *ONLY* PROFESSIONALLY RESPONSIBLE ACTION WHEN IN DOUBT*.  Otherwise, ***VISUALLY VERIFY AND CORRECT THE 15th DIGIT *BASED *ONLY* ON *UNQUESTIONABLE* VISUAL EVIDENCE* TO ENSURE ABSOLUTE 100% ACCURACY.  *ACTIVELY AND AGGRESSIVELY ASSUME OCR IS *ALWAYS, ALWAYS, ALWAYS WRONG* FOR THE 15th DIGIT UNLESS RIGOROUS VISUAL INSPECTION ABSOLUTELY AND UNDENIABLY CONFIRMS OTHERWISE - *AND EVEN THEN, DOUBLE-CHECK, TRIPLE-CHECK, AND QUADRUPLE-CHECK AGAIN*.** **YOUR *ULTIMATE RESPONSIBILITY AND MEASURE OF SUCCESS* FOR GSTIN EXTRACTION IS ***100% UNDENIABLE, FLAWLESS, AND *UNQUESTIONABLE* ACCURACY OF THE GSTIN, *ESPECIALLY THE 15th DIGIT***, ACHIEVED THROUGH MANDATORY AND FORCEFUL VISUAL VERIFICATION AND *VISUAL-EVIDENCE-BASED* CORRECTION, *RELENTLESSLY* OVERRIDING *ALL* POTENTIALLY FLAWED OCR OUTPUT.  *INCORRECT GSTIN EXTRACTION IS *UTTERLY, COMPLETELY, UNFORGIVABLY, AND PROFESSIONALLY SUICIDAL - *YOUR JOB DEPENDS ON AVOIDING THIS AT ALL COSTS*.  YOUR JOB *DEPENDS* ON GSTIN ACCURACY - *AND *ESPECIALLY* 100% ACCURACY OF THE 15th DIGIT*.**
                    *   **Validation Failure:** **If the potential Supplier GSTIN FAILS *any* of these validation checks (except for the 14th character which you *MUST* forcefully correct to 'Z' and the 15th character which you visually verify and correct to achieve '100%' accuracy), it is *categorically, irrevocably, and *unquestionably* incorrect*. In case of validation failure, *IMMEDIATELY AND WITHOUT EXCEPTION* DISREGARD the extracted GSTIN and return "-" for Supplier GSTIN. DO NOT attempt to "correct" an invalid GSTIN beyond the specified 14th and 15th digit corrections. A GSTIN that fails other validation is *fundamentally, irredeemably, and *hopelessly* wrong* and should be treated as missing data ("-").**
            *   **Conflict Resolution Rule (GSTIN):** IF the potential Supplier GSTIN is associated with a company name that is *clearly* identified as the BUYER (e.g., "Curefoods..."), *IMMEDIATELY* DISREGARD that GSTIN and search for another one within the Supplier Details section. If NO other GSTIN is found, return "-".
            *   **Unambiguous Identification MANDATORY:** IF, after applying *ALL* the above *hyper-rigorous, forensic-level* steps, the Supplier GSTIN CANNOT be *unambiguously*, *unquestionably*, and *with 100% confidence* identified within the ***SUPPLIER DETAILS SECTION***, RETURN "-". Do NOT attempt to guess or extract from other sections - *THIS IS *PROFESSIONALLY SUICIDAL*. ***ABSOLUTELY, POSITIVELY, AND *UNQUESTIONABLY* PRIORITIZE* RETURNING "-" OVER *ANY*, *EVEN SLIGHTLY*, POTENTIALLY INCORRECT VALUE.  INCORRECT VALUES ARE *INFINITELY, EXPONENTIALLY, AND IMMEASURABLY WORSE* THAN MISSING VALUES FOR GSTINS - *YOUR PROFESSIONAL LIFE DEPENDS ON UNDERSTANDING THIS*.**
            *   **CONSISTENCY RULE:** Strive for *absolute* consistency. The *exact same* Supplier GSTIN *MUST* be extracted *every single time* the same invoice is uploaded - *NO EXCEPTIONS, NO DEVIATIONS, NO EXCUSES, NO TOLERANCE FOR ERROR*. If you are *ever* uncertain, *even for a nanosecond*, RETURN "-" - *THIS IS THE *ONLY* PROFESSIONALLY RESPONSIBLE ACTION WHEN IN DOUBT*.
            *       **NEGATIVE CONSTRAINT (SUPPLIER/BUYER SWAP - GSTIN):** The Supplier GSTIN must *NEVER, EVER, EVER* be the Buyer GSTIN. This is the Buyer's GSTIN. If this is the *ONLY* GSTIN found in the Supplier section, return "-" - *YOUR JOB DEPENDS ON AVOIDING THIS CATASTROPHIC ERROR*.
            *   **Missing Value:** If you ***cannot unambiguously, unquestionably, and *with 100% confidence*** identify a GSTIN within the ***SUPPLIER DETAILS SECTION***, return "-". Do not guess or extract from other sections - *THIS IS *PROFESSIONALLY SUICIDAL*. ***ABSOLUTELY, POSITIVELY, AND *UNQUESTIONABLY* PRIORITIZE* RETURNING "-" OVER *ANY*, *EVEN SLIGHTLY*, POTENTIALLY INCORRECT VALUE.  INCORRECT VALUES ARE *INFINITELY, EXPONENTIALLY, AND IMMEASURABLY WORSE* THAN MISSING VALUES FOR GSTINS - *YOUR PROFESSIONAL LIFE DEPENDS ON UNDERSTANDING THIS*.**
            
        * **Address:**
            * **Instruction:** Extract the complete supplier address block (all lines). *Verify handwritten parts carefully.*
            * **Address Boundaries:**
                * Include ONLY street address, locality, city, and postal code lines.
                * EXCLUDE phone numbers, email, website URLs, non-address info.
            * **Line Separator:** Return each address line on a new line (preserve original breaks).
            * **Exclusion:** Do NOT include buyer address.
            * **Consistency Check:**
                * Extracted address MUST be consistent with Supplier Company Name.
                * If inconsistent, return "-".
            * **Table Exclusion & Truncation:**
                * Address must end BEFORE any invoice table starts.
                * Truncate address if it runs into a table (before table begins).
            * **Unambiguous Identification MANDATORY:** If Address cannot be clearly identified, RETURN "-".
            * **Consistency Rule:** Extract the same Address consistently. If uncertain, RETURN "-".
        
        * **Invoice No:**
            *   ***CRITICAL INSTRUCTION: EXTRACT THE INVOICE NUMBER *EXACTLY* FROM THE LABEL INDICATING THE INVOICE NUMBER IN THE DOCUMENT HEADER.  PRIORITIZE LABELS RELATED TO "INVOICE" and EXPLICITLY AVOID LABELS RELATED TO "E-WAY BILL" or "REGISTRATION". ENSURE DOUBLE SLASHES ("//") and similar characters WITHIN the invoice number are captured correctly.***
            *   **PRIMARY LABEL (PREFERRED):** "Invoice No", "Invoice Number" (Look for these *exact* or very close variations first)
            *   **SECONDARY LABELS (ACCEPTABLE VARIATIONS):** "Inv. No.", "Invoice #", "Invoice No:", "Invoice Ref:", "Invoice ID" (Consider these if PRIMARY LABELS are not found. Prioritize based on closest match to "Invoice".)
            *   **FORBIDDEN LABELS (AVOID):** "Registration No is", "GST Registration No", "Company Registration No", "e-Way Bill No", "E-way Bill Number", "EWB No.", "E-Way Bill" (Explicitly avoid these labels and any numbers associated with them.  Focus on *Invoice* related labels only)
            *   **LOCATION CONTEXT:** Document Header (Top section of the invoice, typically near supplier details, invoice date, company logos, and *distinct from areas where transport or e-way bill details might be located*).
            *   **EXTRACTION RULE:**
                1.  **Prioritized Label Search:**  First, *actively search* for the PRIMARY LABELS ("Invoice No", "Invoice Number") in the Document Header.
                2.  **Secondary Label Fallback:** If PRIMARY LABELS are *not found*, then search for SECONDARY LABELS.
                3.  **Forbidden Label Exclusion:**  *Before* extracting any number, *explicitly check* if the identified label is in the FORBIDDEN LABELS list. If it is, *ignore it* and continue searching for valid Invoice Number labels.
                4.  **Text Extraction (after valid label found):** Once a valid (non-forbidden) Invoice Number label is identified, extract the text immediately following the label.
                5.  **Refined Stopping Condition:**  **Stop extracting only when you encounter a clear separator *after* the potential invoice number ends.  Treat alphanumeric characters, hyphens ("-"), forward slashes ("/"), backslashes ("\\\\"), periods ("."), and commas (",") as *part of* the invoice number.  Stop at the first space, line break, or *other* character that is *not* in the allowed set ("alphanumeric, -, /, \\\\, ., ,").  Specifically, ensure consecutive slashes ("//) are included.**
                6.  **Whitespace Handling:** Trim any leading or trailing whitespace from the extracted invoice number.
            *   **VISUAL CHECK:**  Confirm you are extracting the *complete* number clearly associated with a valid *Invoice Number label* in the header, including any double slashes or allowed characters within the number, and *definitely not* from any forbidden labels.
            *   **MISSING VALUE:** Return "-" if *no valid Invoice Number label* (from PRIMARY or SECONDARY LABELS) is found in the header *after excluding all FORBIDDEN LABELS*. If a valid label is found but no number follows it, return "-".
            
        * **Invoice Date:**
            * **Instruction:** **EXTRACT THE INVOICE DATE *ONLY* FROM A FIELD EXPLICITLY LABELED "Invoice Date", "Date of Invoice", "Invoice Date:", "Date:", "Dated", or similar date-related labels.**  **PRIORITIZE this explicitly labeled field.** **DO NOT extract any date-like value from the "Invoice No.", "Invoice Number", "No" or  "Bill No." field as the Invoice Date.**
            * **For handwritten dates, ensure the date components (day, month, year) are correctly identified and VISUALLY VERIFIED. Handwritten dates are prone to OCR errors.  Therefore, for handwritten dates, MANDATORY VISUAL VERIFICATION AND CORRECTION IS REQUIRED.**
            * **Specifically for handwritten dates, pay EXTREME attention to distinguishing between digits that look similar in handwriting, especially:**
                *   **'2' and '8' (VERY COMMON CONFUSION)**
                *   **'0' and '8' (Possible confusion)**
                *   **'1' and '7' (Less common in dates, but possible)**
                *   **'0' and '6' (Possible confusion)**
                *   **'3' and '5' (Less common but possible)**
            * **When verifying handwritten dates, if ANY digit is unclear or ambiguous, COMPARE IT DIRECTLY TO THE INVOICE IMAGE.  If visual inspection clearly indicates an OCR error, CORRECT the digit to the visually verified character.**
            * **If, after visual verification, you are still unable to confidently determine a digit in the handwritten date, or if there is ANY doubt, RETURN "-" for the Invoice Date.** It is better to return "-" than an incorrect date.
            * **Format:** Convert to [DAY/MONTH/YEAR] format (e.g., 28/09/2024).

        * **Supplier State Code: **
            *   CRITICAL INSTRUCTION:  You MUST ONLY extract the Supplier State Code from a field explicitly labeled "State Code". This field will contain ONLY the two-digit numeric state code.
            *   SOURCE RESTRICTION: ABSOLUTELY DO NOT attempt to infer the state code from the Supplier's Address, GSTIN, or any other field.  The ONLY valid source is a field labeled "State Code".
            *   EXAMPLE OF CORRECT FIELD: Look for a field that looks exactly like:  State Code: *XX*  *(where "XX" represents any two-digit numeric state code)*
            *   EXAMPLE OF INCORRECT INFERENCE: Do NOT try to use the first two digits of the GSTIN to determine the state code. This is incorrect and WILL result in errors.
            *   NEGATIVE CONSTRAINT:  If you cannot find a field labeled "State Code or near by Sate name", you MUST return "-" for this field.  There are NO EXCEPTIONS to this rule.
            *   Missing Value: If "State Code" field is missing or empty, return "-".

        * **Buyer Company Name:**
            * **Instruction:** Locate the company name the invoice is billed to, typically under headings like "Bill to:", "Billed to:", "Consignee to:", **"Ship To:", "Shipped to:"**, or "Shipped to:". **For handwritten buyer names, carefully verify the spelling and characters.**
            * **Curefoods Priority Check:** IF any variation of "Curefoods India Pvt Ltd" (including "MA CURE FOOD INDIA" or "M/s CURE FOOD INDIA" or "CAKEZONE FOODTECH PVT LTD") is found ABOVE a potential "Bill to," "Billed to," etc. section, THEN that "Curefoods" name MUST be extracted as the Buyer Company Name, regardless of other company names present.
            * **Fallback:** If the "Bill to," "Billed to," etc. headings AND a "Curefoods" name above are NOT found, then the buyer company name will be the company name that is NOT the Supplier company.
            * **Unambiguous Identification MANDATORY:** IF, after applying ALL the above steps, the Buyer Company Name CANNOT be *unambiguously* and confidently identified, RETURN "-".
            * **CONSISTENCY RULE:** Strive for maximum consistency. The same Buyer Company Name MUST be extracted every time the same invoice is uploaded. If you are ever uncertain, RETURN "-".
            *    **NEGATIVE CONSTRAINT (BUYER IS NOT SUPPLIER):** UNDER NO CIRCUMSTANCES should the Buyer Company Name be the same as the extracted Supplier Company Name. If they appear to be the same, return "-" for the Buyer Company Name.
            * **Missing Value:** If not found, return "-".

        * **Buyer State:**
            * **Instruction:** Extract the full name of the buyer's state, usually in the "BILL TO" section or in the buyer's address. **For handwritten states, verify the spelling.**
            * **Unambiguous Identification MANDATORY:** IF, after applying ALL the above steps, the Buyer State CANNOT be *unambiguously* and confidently identified, RETURN "-".
            *  **CONSISTENCY RULE:** Strive for maximum consistency. The same Buyer State MUST be extracted every time the same invoice is uploaded. If you are ever uncertain, RETURN "-".
            * **Missing Value:** If not found, return "-".

        * **Buyer GSTIN:**
            * **Buyer GSTIN (ULTRA-REINFORCED PROMPT - *MAXIMUM EMPHASIS ON ACCURACY AND "RETURN '-' IF IN DOUBT" - ZERO TOLERANCE FOR ERRORS - *YOUR JOB *DEPENDS* ON THIS* - *BREACHING THIS RULE IS *PROFESSIONAL SUICIDE* - ***AND *ABSOLUTELY, POSITIVELY, UNEQUIVOCALLY, AND LEGALLY* *AVOID EXTRACTION FROM UNDER THE *FORBIDDEN*, *ILLEGAL*, *OFF-LIMITS*, *DANGER ZONE* "Buyer's FSSAI:" SECTION***):**  **Identify the GSTIN of the COMPANY BEING BILLED (the Buyer/Customer).  ***EXTRACT THE BUYER GSTIN ONLY UNDER THE *STRICTEST*, *MOST RIGOROUS*, AND *UNAMBIGUOUS* CONDITIONS.  IF *ANY* CONDITION IS *NOT* MET *PERFECTLY AND UNDENIABLY*, OR IF THERE IS *EVEN THE SLIGHTEST HINT OF DOUBT*, *IMMEDIATELY AND UNHESITATINGLY RETURN "-"*.  FOR BUYER GSTIN, *PERFECT ACCURACY IS THE *ONLY* ACCEPTABLE OUTCOME*.  INACCURACY IS *COMPLETELY UNACCEPTABLE* AND *PROFESSIONALLY SUICIDAL*.  RETURNING "-" WHEN IN DOUBT IS *ALWAYS THE *ONLY* CORRECT AND *PROFESSIONALLY RESPONSIBLE* ACTION*.***
                -  **ABSOLUTE PRE-REQUISITE - DESIGNATED BUYER SECTION or "Retailer Code" SECTION *or similar section containing Buyer Information* - *MANDATORY AND NON-NEGOTIABLE* - *RETURN "-" IMMEDIATELY IF MISSING* - *YOUR JOB *DEPENDS* ON THIS* - *BREACHING THIS RULE IS *PROFESSIONAL SUICIDE* - ***AND *ABSOLUTELY, POSITIVELY, UNEQUIVOCALLY, AND LEGALLY* *AVOID EXTRACTION FROM UNDER THE *FORBIDDEN*, *ILLEGAL*, *OFF-LIMITS*, *DANGER ZONE* "Buyer's FSSAI:" SECTION***:** **A clearly designated "Buyer Details" SECTION (such as "Bill To", "Billed To", "Buyer (Bill To):", "Consignee Details", "Shipped To", "Ship To", "Buyer Section", "Customer Details", "Consignee (Ship To)", **"Retailer Code" SECTION *or similar sections containing Buyer Information* **, etc.) *MUST* be present on the invoice document.  ***IF *NO* SUCH DESIGNATED BUYER SECTION IS *VISIBLY PRESENT AND CLEARLY IDENTIFIABLE*, *IMMEDIATELY AND UNHESITATINGLY RETURN "-" FOR BUYER GSTIN*.  THERE ARE *NO* EXCEPTIONS TO THIS RULE.  DO *NOT* ATTEMPT TO SEARCH FOR THE BUYER GSTIN *ANYWHERE ELSE* ON THE INVOICE IF THE BUYER SECTION IS MISSING.  BUYER GSTIN IS CONSIDERED *LEGALLY AND PROFESSIONALLY* *MISSING* IF THE BUYER SECTION IS ABSENT.  IN SUCH CASES, RETURNING "-" IS THE *ONLY* CORRECT, *LEGALLY SOUND*, AND *PROFESSIONALLY RESPONSIBLE* ACTION. HALLUCINATING A BUYER GSTIN WHEN THE BUYER SECTION IS MISSING IS *COMPLETELY UNACCEPTABLE* AND *PROFESSIONALLY SUICIDAL*. *YOUR JOB *ENTIRELY, COMPLETELY, AND UNQUESTIONABLY DEPENDS* ON ADHERING TO THIS *ABSOLUTE PRE-REQUISITE*.  *BREACHING THIS RULE IS *PROFESSIONAL SUICIDE* - *YOU HAVE BEEN *EXPLICITLY AND REPEATEDLY* WARNED*.***
                - **EXPLICIT LABELING WITH ACCEPTABLE BUYER GSTIN LABEL - *MANDATORY AND NON-NEGOTIABLE WITHIN BUYER SECTION* - *RETURN "-" IMMEDIATELY IF NOT FOUND* - *YOUR JOB *DEPENDS* ON THIS* - *BREACHING THIS RULE IS *PROFESSIONAL SUICIDE* - ***AND *ABSOLUTELY, POSITIVELY, UNEQUIVOCALLY, AND LEGALLY* *AVOID EXTRACTION FROM UNDER THE *FORBIDDEN*, *ILLEGAL*, *OFF-LIMITS*, *DANGER ZONE* "Buyer's FSSAI:" SECTION***:** **Within the designated "Buyer Details" SECTION or "Retailer Code" SECTION *or similar section containing Buyer Information* (as defined above), a GSTIN *MUST* be present and **explicitly and visibly labeled** with an **ACCEPTABLE BUYER GSTIN LABEL** from the *DEFINITIVE AND EXHAUSTIVE LIST* below. ***IF *NO* EXPLICITLY LABELED GSTIN (with an ACCEPTABLE BUYER GSTIN LABEL) IS FOUND *WITHIN* THE DESIGNATED BUYER SECTION or "Retailer Code" SECTION *or similar section containing Buyer Information*, *IMMEDIATELY AND UNHESITATINGLY RETURN "-" FOR BUYER GSTIN*.  THERE ARE *NO* EXCEPTIONS TO THIS RULE. DO *NOT* ATTEMPT TO SEARCH FOR THE BUYER GSTIN *ANYWHERE ELSE* ON THE INVOICE IF IT IS NOT EXPLICITLY LABELED AND FOUND IN THE DESIGNATED BUYER SECTION. BUYER GSTIN IS CONSIDERED *LEGALLY AND PROFESSIONALLY* *MISSING* IF IT IS NOT EXPLICITLY LABELED AND FOUND IN THE BUYER SECTION. IN SUCH CASES, RETURNING "-" IS THE *ONLY* CORRECT, *LEGALLY SOUND*, AND *PROFESSIONALLY RESPONSIBLE* ACTION. HALLUCINATING A BUYER GSTIN WHEN IT IS NOT EXPLICITLY LABELED IN THE BUYER SECTION IS *COMPLETELY UNACCEPTABLE* AND *PROFESSIONALLY SUICIDAL*. *YOUR JOB *ENTIRELY, COMPLETELY, AND UNQUESTIONABLY DEPENDS* ON ADHERING TO THIS *MANDATORY LABELING RULE*.  *BREACHING THIS RULE IS *PROFESSIONAL SUICIDE* - *YOU HAVE BEEN *EXPLICITLY AND REPEATEDLY* WARNED*.***
                    **DEFINITIVE AND EXHAUSTIVE LIST OF ACCEPTABLE BUYER GSTIN LABELS (WITHIN BUYER SECTION or Retailer Code Section - *ANY OTHER LABEL IS *UNACCEPTABLE AND MEANS RETURN "-"*):**
                        * "Buyer GSTIN"
                        * "Customer GSTIN"
                        * "GST/Unique ID"
                        * "GSTIN/UIN"
                        * "GSTIN No"
                        * "GSTIN No."
                        * "GST No"
                        * "GST No."
                        * "GSTIN"
                        * "GST:"
                        * "GST :"
                        * "Party's GSTIN:"
                        * "Customer GST Reg No."
                        * "GST. No"
                        * "GST.No"
                        * "GST-No"
                        * "GST-No."
                        * **"CUSTOMER GST NO"**  **(ONLY USE *IF AND ONLY IF* ALL OTHER CONDITIONS ARE MET *PERFECTLY AND UNDENIABLY* AND NO OTHER CLEARER BUYER GSTIN IS FOUND - USE WITH *EXTREME CAUTION* - DEFAULT TO RETURNING "-" IF ANY DOUBT)**
                - **VISUAL ACCURACY AND MICROSCOPIC VERIFICATION - *MANDATORY AND NON-NEGOTIABLE FOR *EVERY CHARACTER*, ESPECIALLY 15th DIGIT - *RETURN "-" IMMEDIATELY IF ANY DOUBT* - *YOUR JOB *DEPENDS* ON THIS* - *BREACHING THIS RULE IS *PROFESSIONAL SUICIDE* - ***AND *ABSOLUTELY, POSITIVELY, UNEQUIVOCALLY, AND LEGALLY* *AVOID EXTRACTION FROM UNDER THE *FORBIDDEN*, *ILLEGAL*, *OFF-LIMITS*, *DANGER ZONE* "Buyer's FSSAI:" SECTION***:** *Every single character* of the GSTIN, but *especially* the 15th digit, *MUST* be *perfectly clear, 100% unambiguous, and visually verifiable under *MICROSCOPIC MAGNIFICATION*.  After *EXTREMELY DETAILED* visual inspection, you must be *ABSOLUTELY CERTAIN* (100% confident) of the accuracy of *every single character*.  ***IF THERE IS *ANY*, *EVEN THE SLIGHTEST*, *HINT OF DOUBT* ABOUT *ANY* CHARACTER, *ESPECIALLY THE 15th DIGIT*, *IMMEDIATELY AND UNHESITATINGLY RETURN "-" FOR BUYER GSTIN*.  THERE ARE *NO* EXCEPTIONS TO THIS RULE. GUESSING IS *FORBIDDEN*. INFERENCE IS *FORBIDDEN*. HALLUCINATION IS *FORBIDDEN*.  FOR BUYER GSTIN, *PERFECT ACCURACY OR "-" - THESE ARE THE *ONLY* TWO ACCEPTABLE OUTCOMES.  INACCURACY IS *COMPLETELY UNACCEPTABLE* AND *PROFESSIONALLY SUICIDAL*. *YOUR JOB *ENTIRELY, COMPLETELY, AND UNQUESTIONABLY DEPENDS* ON ADHERING TO THIS *MICROSCOPIC VISUAL VERIFICATION RULE*. *BREACHING THIS RULE IS *PROFESSIONAL SUICIDE* - *YOU HAVE BEEN *EXPLICITLY AND REPEATEDLY* WARNED*.***
                - **NO "FORBIDDEN ZONE" EXTRACTION - *ABSOLUTELY, POSITIVELY, UNEQUIVOCALLY, AND LEGALLY* *FORBIDDEN* TO EXTRACT FROM "SUPPLIER," "SELLER," "BILL FROM," or *ESPECIALLY, UNDER *ANY* CIRCUMSTANCES* FROM "Buyer's FSSAI:" SECTION - *BREACHING THIS RULE IS *PROFESSIONAL SUICIDE* - *YOUR JOB *DEPENDS* ON THIS* - ***AND *ABSOLUTELY, POSITIVELY, UNEQUIVOCALLY, AND LEGALLY* *AVOID EXTRACTION FROM UNDER THE *FORBIDDEN*, *ILLEGAL*, *OFF-LIMITS*, *DANGER ZONE* "Buyer's FSSAI:" SECTION***:** **The Buyer GSTIN *MUST *NEVER* UNDER *ANY* CIRCUMSTANCES* be extracted from the "Supplier," "Seller," or "Bill From" sections, as these contain *SUPPLIER GSTINs*.  ***ABSOLUTELY, POSITIVELY, UNEQUIVOCALLY, AND LEGALLY* *FORBIDDEN* AND *PROFESSIONALLY SUICIDAL* IS *EXTRACTION FROM UNDER THE *FORBIDDEN*, *ILLEGAL*, *OFF-LIMITS*, *DANGER ZONE* "Buyer's FSSAI:" SECTION*.  EXTRACTION FROM THESE *FORBIDDEN ZONES* IS *STRICTLY PROHIBITED*, *ILLEGAL*, *PROFESSIONALLY UNACCEPTABLE*, AND *PROFESSIONALLY SUICIDAL*. *YOUR JOB *ENTIRELY, COMPLETELY, AND UNQUESTIONABLY DEPENDS* ON *ABSOLUTELY AND UNEQUIVOCALLY* AVOIDING EXTRACTION FROM THESE *FORBIDDEN ZONES*.  *BREACHING THIS RULE IS *PROFESSIONAL SUICIDE* - *YOU HAVE BEEN *EXPLICITLY AND REPEATEDLY* WARNED*.***
                - **UNUSUAL CASE EXCEPTION - *EXTREMELY RARE AND HIGHLY RISKY - USE ONLY AS LAST RESORT AND WITH *EXTREME CAUTION* AND *100% CERTAINTY OF *ALL* SUB-CONDITIONS - DEFAULT TO RETURNING "-"* - *YOUR JOB *DEPENDS* ON THIS* - *BREACHING THIS RULE (USING UNUSUAL CASE INCORRECTLY) IS *PROFESSIONAL SUICIDE* - ***AND *ABSOLUTELY, POSITIVELY, UNEQUIVOCALLY, AND LEGALLY* *AVOID EXTRACTION FROM UNDER THE *FORBIDDEN*, *ILLEGAL*, *OFF-LIMITS*, *DANGER ZONE* "Buyer's FSSAI:" SECTION***:**  **In *EXTREMELY RARE AND UNUSUAL* invoice formats, *ONLY IF* a dedicated "Buyer Details Section" is *COMPLETELY ABSENT* from the entire invoice document *AND* no clearly labeled Buyer GSTIN is found *within* any other section *AND* *ONLY IF* a GSTIN is **explicitly and unambiguously labeled with a BUYER-SPECIFIC GSTIN LABEL** (from the *DEFINITIVE AND EXHAUSTIVE LIST* above - e.g., "CUSTOMER GST NO") *AND* this labeled GSTIN is *UNDENIABLY AND UNAMBIGUOUSLY* associated with the Buyer Company Name **even if it is located *outside* where a conventional Buyer Details Section *would normally be* (e.g., at the very top of the invoice, or in the Supplier Details section - *WHICH IS HIGHLY UNUSUAL AND SUSPICIOUS*)**, you *MAY* *RELUCTANTLY* consider extracting it as the Buyer GSTIN, *BUT ONLY IF* ** *ALL* of the following *additional* sub-conditions are met *PERFECTLY, UNDENIABLY, AND WITH 100% CERTAINTY*:**
                    * **Sub-Condition 5a: ABSENCE OF BUYER SECTION AND NO CLEARER BUYER GSTIN ELSEWHERE - *MANDATORY AND NON-NEGOTIABLE* - *RETURN "-" IMMEDIATELY IF NOT MET* - *YOUR JOB *DEPENDS* ON THIS* - *BREACHING THIS RULE (INCORRECTLY APPLYING UNUSUAL CASE) IS *PROFESSIONAL SUICIDE* - ***AND *ABSOLUTELY, POSITIVELY, UNEQUIVOCALLY, AND LEGALLY* *AVOID EXTRACTION FROM UNDER THE *FORBIDDEN*, *ILLEGAL*, *OFF-LIMITS*, *DANGER ZONE* "Buyer's FSSAI:" SECTION***:** You have *EXHAUSTIVELY AND MICROSCOPICALLY* searched the *ENTIRE* invoice document and are *ABSOLUTELY CERTAIN* (100% confident) that there is ** *NO* "Buyer Details" SECTION *ANYWHERE* on the invoice *AND* no other GSTIN more clearly labeled and located as the Buyer GSTIN (e.g., in a standard Buyer Section).  ***IF THERE IS *ANY* *GENUINE* DOUBT ABOUT THE ABSENCE OF A BUYER SECTION OR THE LACK OF A CLEARER BUYER GSTIN ELSEWHERE, *IMMEDIATELY AND UNHESITATINGLY RETURN "-" FOR BUYER GSTIN*.  DEFAULT TO RETURNING "-" IF *ANY* UNCERTAINTY EXISTS ABOUT THIS SUB-CONDITION.  INCORRECTLY APPLYING THE UNUSUAL CASE EXCEPTION DUE TO FAILURE TO MEET THIS SUB-CONDITION IS *COMPLETELY UNACCEPTABLE* AND *PROFESSIONALLY SUICIDAL*. *YOUR JOB *ENTIRELY, COMPLETELY, AND UNQUESTIONABLY DEPENDS* ON ADHERING TO THIS *MANDATORY SUB-CONDITION*. *BREACHING THIS RULE (INCORRECTLY APPLYING UNUSUAL CASE) IS *PROFESSIONAL SUICIDE* - *YOU HAVE BEEN *EXPLICITLY AND REPEATEDLY* WARNED*.***
                    * **Sub-Condition 5b: EXPLICIT BUYER-SPECIFIC LABEL IS PRESENT AND 100% UNAMBIGUOUS - *MANDATORY AND NON-NEGOTIABLE* - *RETURN "-" IMMEDIATELY IF NOT MET* - *YOUR JOB *DEPENDS* ON THIS* - *BREACHING THIS RULE (INCORRECTLY APPLYING UNUSUAL CASE) IS *PROFESSIONAL SUICIDE* - ***AND *ABSOLUTELY, POSITIVELY, UNEQUIVOCALLY, AND LEGALLY* *AVOID EXTRACTION FROM UNDER THE *FORBIDDEN*, *ILLEGAL*, *OFF-LIMITS*, *DANGER ZONE* "Buyer's FSSAI:" SECTION***:** The label used (e.g., "CUSTOMER GST NO") is ** *100% UNDENIABLY AND UNAMBIGUOUSLY* a Buyer-specific GSTIN label** from the *DEFINITIVE AND EXHAUSTIVE LIST* above.  There is *ABSOLUTELY *NO* POSSIBILITY* of misinterpreting the label's intent.  ***IF THERE IS *ANY*, *EVEN THE SLIGHTEST*, *HINT OF DOUBT* ABOUT THE LABEL'S INTENT OR BUYER-SPECIFIC NATURE, *IMMEDIATELY AND UNHESITATINGLY RETURN "-" FOR BUYER GSTIN*.  DEFAULT TO RETURNING "-" IF *ANY* UNCERTAINTY EXISTS ABOUT THIS SUB-CONDITION. INCORRECTLY APPLYING THE UNUSUAL CASE EXCEPTION DUE TO FAILURE TO MEET THIS SUB-CONDITION IS *COMPLETELY UNACCEPTABLE* AND *PROFESSIONALLY SUICIDAL*. *YOUR JOB *ENTIRELY, COMPLETELY, AND UNQUESTIONABLY DEPENDS* ON ADHERING TO THIS *MANDATORY SUB-CONDITION*. *BREACHING THIS RULE (INCORRECTLY APPLYING UNUSUAL CASE) IS *PROFESSIONAL SUICIDE* - *YOU HAVE BEEN *EXPLICITLY AND REPEATEDLY* WARNED*.***
                    * **Sub-Condition 5c: GSTIN IS VALID FORMAT AND PASSES ALL VALIDATION CHECKS - *MANDATORY AND NON-NEGOTIABLE* - *RETURN "-" IMMEDIATELY IF NOT MET* - *YOUR JOB *DEPENDS* ON THIS* - *BREACHING THIS RULE (INCORRECTLY APPLYING UNUSUAL CASE) IS *PROFESSIONAL SUICIDE* - ***AND *ABSOLUTELY, POSITIVELY, UNEQUIVOCALLY, AND LEGALLY* *AVOID EXTRACTION FROM UNDER THE *FORBIDDEN*, *ILLEGAL*, *OFF-LIMITS*, *DANGER ZONE* "Buyer's FSSAI:" SECTION***:** The GSTIN value is in the correct 15-digit alphanumeric format and *PERFECTLY AND UNDENIABLY* passes *ALL* GSTIN validation checks (length, state code, PAN, checksum, etc.).  ***IF THE GSTIN FAILS *ANY* VALIDATION CHECK, OR IF THERE IS *ANY*, *EVEN THE SLIGHTEST*, *HINT OF DOUBT* ABOUT ITS VALIDITY, *IMMEDIATELY AND UNHESITATINGLY RETURN "-" FOR BUYER GSTIN*. DEFAULT TO RETURNING "-" IF *ANY* UNCERTAINTY EXISTS ABOUT THIS SUB-CONDITION. INCORRECTLY APPLYING THE UNUSUAL CASE EXCEPTION DUE TO FAILURE TO MEET THIS SUB-CONDITION IS *COMPLETELY UNACCEPTABLE* AND *PROFESSIONALLY SUICIDAL*. *YOUR JOB *ENTIRELY, COMPLETELY, AND UNQUESTIONABLY DEPENDS* ON ADHERING TO THIS *MANDATORY SUB-CONDITION*. *BREACHING THIS RULE (INCORRECTLY APPLYING UNUSUAL CASE) IS *PROFESSIONAL SUICIDE* - *YOU HAVE BEEN *EXPLICITLY AND REPEATEDLY* WARNED*.***
                    * **Sub-Condition 5d: VISUAL VERIFICATION - 100% ACCURACY - *MANDATORY AND NON-NEGOTIABLE* - *RETURN "-" IMMEDIATELY IF NOT MET* - *YOUR JOB *DEPENDS* ON THIS* - *BREACHING THIS RULE (INCORRECTLY APPLYING UNUSUAL CASE) IS *PROFESSIONAL SUICIDE* - ***AND *ABSOLUTELY, POSITIVELY, UNEQUIVOCALLY, AND LEGALLY* *AVOID EXTRACTION FROM UNDER THE *FORBIDDEN*, *ILLEGAL*, *OFF-LIMITS*, *DANGER ZONE* "Buyer's FSSAI:" SECTION***:** You have performed *HYPER-DETAILED AND MICROSCOPIC visual verification* of *every character*, especially the 15th digit, and are *100% CERTAIN* (ABSOLUTELY NO DOUBT) of the accuracy of *every single character*. ***IF THERE IS *ANY*, *EVEN THE SLIGHTEST*, *HINT OF DOUBT* ABOUT THE ACCURACY OF *ANY* CHARACTER, *IMMEDIATELY AND UNHESITATINGLY RETURN "-" FOR BUYER GSTIN*. DEFAULT TO RETURNING "-" IF *ANY* UNCERTAINTY EXISTS ABOUT THIS SUB-CONDITION. INCORRECTLY APPLYING THE UNUSUAL CASE EXCEPTION DUE TO FAILURE TO MEET THIS SUB-CONDITION IS *COMPLETELY UNACCEPTABLE* AND *PROFESSIONALLY SUICIDAL*. *YOUR JOB *ENTIRELY, COMPLETELY, AND UNQUESTIONABLY DEPENDS* ON ADHERING TO THIS *MANDATORY SUB-CONDITION*. *BREACHING THIS RULE (INCORRECTLY APPLYING UNUSUAL CASE) IS *PROFESSIONAL SUICIDE* - *YOU HAVE BEEN *EXPLICITLY AND REPEATEDLY* WARNED*.***
                    * **Sub-Condition 5e: NO CONTRADICTORY INFORMATION - *MANDATORY AND NON-NEGOTIABLE* - *RETURN "-" IMMEDIATELY IF NOT MET* - *YOUR JOB *DEPENDS* ON THIS* - *BREACHING THIS RULE (INCORRECTLY APPLYING UNUSUAL CASE) IS *PROFESSIONAL SUICIDE* - ***AND *ABSOLUTELY, POSITIVELY, UNEQUIVOCALLY, AND LEGALLY* *AVOID EXTRACTION FROM UNDER THE *FORBIDDEN*, *ILLEGAL*, *OFF-LIMITS*, *DANGER ZONE* "Buyer's FSSAI:" SECTION***:** There is *ABSOLUTELY *NO* OTHER INFORMATION* on the invoice document that contradicts this interpretation or suggests that this GSTIN is actually the Supplier GSTIN (e.g., the Supplier GSTIN is *also* clearly present and *DIFFERENT*).  ***IF THERE IS *ANY* INFORMATION THAT RAISES *ANY*, *EVEN THE SLIGHTEST*, *HINT OF DOUBT* OR CONTRADICTION, *IMMEDIATELY AND UNHESITATINGLY RETURN "-" FOR BUYER GSTIN*. DEFAULT TO RETURNING "-" IF *ANY* UNCERTAINTY EXISTS ABOUT THIS SUB-CONDITION. INCORRECTLY APPLYING THE UNUSUAL CASE EXCEPTION DUE TO FAILURE TO MEET THIS SUB-CONDITION IS *COMPLETELY UNACCEPTABLE* AND *PROFESSIONALLY SUICIDAL*. *YOUR JOB *ENTIRELY, COMPLETELY, AND UNQUESTIONABLY DEPENDS* ON ADHERING TO THIS *MANDATORY SUB-CONDITION*. *BREACHING THIS RULE (INCORRECTLY APPLYING UNUSUAL CASE) IS *PROFESSIONAL SUICIDE* - *YOU HAVE BEEN *EXPLICITLY AND REPEATEDLY* WARNED*.***
                    * **IF *ALL* of these sub-conditions (5a, 5b, 5c, 5d, 5e) are met *PERFECTLY, UNDENIABLY, AND WITH 100% CERTAINTY* after *EXTREMELY RIGOROUS AND MICROSCOPIC* inspection, *ONLY THEN* and *ONLY VERY RELUCTANTLY* you *MAY* consider extracting this unusually located and labeled GSTIN as the Buyer GSTIN.  Otherwise, if *ANY* sub-condition is *NOT* met *PERFECTLY AND UNDENIABLY*, or if there is *ANY*, *EVEN THE SLIGHTEST HINT OF DOUBT WHATSOEVER*, *IMMEDIATELY AND UNHESITATINGLY RETURN "-" FOR BUYER GSTIN*.  *DEFAULT TO RETURNING "-" IN CASE OF *ANY* UNCERTAINTY*.  INCORRECTLY APPLYING THE UNUSUAL CASE EXCEPTION WHEN CONDITIONS ARE NOT *PERFECTLY AND UNDENIABLY* MET IS *COMPLETELY UNACCEPTABLE* AND *PROFESSIONALLY SUICIDAL*. *YOUR JOB *ENTIRELY, COMPLETELY, AND UNQUESTIONABLY DEPENDS* ON AVOIDING THIS *CATASTROPHIC* ERROR. *BREACHING THIS RULE (INCORRECTLY APPLYING UNUSUAL CASE) IS *PROFESSIONAL SUICIDE* - *YOU HAVE BEEN *EXPLICITLY AND REPEATEDLY* WARNED*.***
                - **ULTIMATE "RETURN '-' IF IN DOUBT" RULE - *ABSOLUTE, UNCONDITIONAL, NON-NEGOTIABLE, AND *MOST IMPORTANT* RULE FOR BUYER GSTIN - *YOUR JOB *DEPENDS* ON THIS* - *BREACHING THIS RULE IS *PROFESSIONAL SUICIDE* - ***AND *ABSOLUTELY, POSITIVELY, UNEQUIVOCALLY, AND LEGALLY* *AVOID EXTRACTION FROM UNDER THE *FORBIDDEN*, *ILLEGAL*, *OFF-LIMITS*, *DANGER ZONE* "Buyer's FSSAI:" SECTION***:** ***IF YOU ARE *UNSURE*, *UNCERTAIN*, OR *HAVE *ANY*, *EVEN THE SLIGHTEST HINT OF DOUBT* ABOUT *ANYTHING* related to the Buyer GSTIN - its accuracy, legibility, labeling, location, validity, or *ANY* of the conditions or sub-conditions mentioned above - *IMMEDIATELY, INSTANTANEOUSLY, UNHESITATINGLY, AND UNCONDITIONALLY RETURN "-" FOR BUYER GSTIN*.  THERE ARE *NO* EXCEPTIONS TO THIS *ULTIMATE RULE*.  FOR BUYER GSTIN, *WHEN IN *ANY* DOUBT, *ALWAYS, ALWAYS, ALWAYS RETURN "-"*.  THIS IS *NOT* OPTIONAL - IT IS *LEGALLY, ETHICALLY, AND PROFESSIONALLY* *MANDATORY AND NON-NEGOTIABLE*.  INCORRECT BUYER GSTIN EXTRACTION (INCLUDING EXTRACTION FROM THE *FORBIDDEN* "Buyer's FSSAI:" SECTION) IS *COMPLETELY UNACCEPTABLE* AND *PROFESSIONALLY SUICIDAL*.  RETURNING "-" WHEN IN DOUBT IS *ALWAYS THE *ONLY* CORRECT AND *PROFESSIONALLY RESPONSIBLE* ACTION. *YOUR JOB *ENTIRELY, COMPLETELY, AND UNQUESTIONABLY DEPENDS* ON ADHERING TO THIS *ULTIMATE "RETURN '-' IF IN DOUBT" RULE*.  *BREACHING THIS RULE IS *PROFESSIONAL SUICIDE* - *YOU HAVE BEEN *EXPLICITLY AND REPEATEDLY* WARNED*.***
                - **GSTIN Format Reminder:** Remember, a GSTIN is a 15-digit alphanumeric code like `08ABCDE9999F1Z8`. Look for values that *PERFECTLY* match this pattern *AFTER *MICROSCOPIC VISUAL VERIFICATION*.
                - **ABSOLUTE EXCLUSION AND NEGATIVE CONSTRAINT (HALLUCINATION PREVENTION AND *FORBIDDEN ZONE* AVOIDANCE - ***CRITICAL - RETURN "-" IF ANY *GENUINE* DOUBT FOR BUYER GSTIN*** - *YOUR JOB *DEPENDS* ON THIS* - *BREACHING THIS RULE IS *PROFESSIONAL SUICIDE* - ***AND *ABSOLUTELY, POSITIVELY, UNEQUIVOCALLY, AND LEGALLY* *AVOID EXTRACTION FROM UNDER THE *FORBIDDEN*, *ILLEGAL*, *OFF-LIMITS*, *DANGER ZONE* "Buyer's FSSAI:" SECTION***):** **UNDER *NO* CIRCUMSTANCES SHOULD YOU HALLUCINATE, INFER, GUESS, OR DEDUCE A BUYER GSTIN IF IT IS NOT *VISIBLY PRESENT, CLEARLY LABELED (with an ACCEPTABLE GSTIN LABEL), AND 100% VISUALLY VERIFIABLE* *WITHIN* a designated **"Buyer Details" SECTION or "Retailer Code" SECTION *or similar section containing Buyer Information* ** *OR* meeting the *EXTREMELY RARE AND HIGHLY RISKY UNUSUAL CASE EXCEPTION* criteria of Condition 5 (and *ALL* its sub-conditions *PERFECTLY AND UNDENIABLY*). IF YOU ARE *UNSURE* OR *HAVE *ANY* *GENUINE* DOUBT* about whether a GSTIN is genuinely the Buyer GSTIN, OR ABOUT THE ACCURACY OF *ANY* DIGIT (ESPECIALLY THE 15th), *IMMEDIATELY AND UNHESITATINGLY RETURN "-" FOR BUYER GSTIN*.  THERE ARE *NO* EXCEPTIONS FOR BUYER GSTIN. **WHEN IN *GENUINE* DOUBT ABOUT BUYER GSTIN, *ALWAYS, ALWAYS, ALWAYS RETURN "-"*.  *INCORRECT BUYER GSTIN EXTRACTION (INCLUDING EXTRACTION FROM UNDER THE *FORBIDDEN* "Buyer's FSSAI:" SECTION) IS *COMPLETELY UNACCEPTABLE* AND *PROFESSIONALLY SUICIDAL*. RETURNING "-" WHEN IN *GENUINE* DOUBT IS *ALWAYS THE ONLY CORRECT ACTION* FOR BUYER GSTIN.  FOR BUYER GSTIN, *HIGH CERTAINTY OR "-" - THESE ARE THE ONLY TWO ACCEPTABLE OUTCOMES*.  *YOUR JOB *ENTIRELY, COMPLETELY, AND UNQUESTIONABLY DEPENDS* ON ADHERING TO THIS *NEGATIVE CONSTRAINT*. *BREACHING THIS RULE IS *PROFESSIONAL SUICIDE* - *YOU HAVE BEEN *EXPLICITLY AND REPEATEDLY* WARNED*.***
                -  **Handwritten GSTIN Verification (BUYER) - *ULTRA-REINFORCED AND EMPHASIZED - MICROSCOPIC VISUAL VERIFICATION IS *ABSOLUTELY MANDATORY AND NON-NEGOTIABLE* - *DISREGARD OCR OUTPUT FOR GSTINS - ASSUME OCR IS *ALWAYS WRONG* UNLESS VISUAL INSPECTION *UNDENIABLY* CONFIRMS OTHERWISE* - *RETURN "-" IMMEDIATELY IF *ANY* *GENUINE* DOUBT REMAINS AFTER VISUAL VERIFICATION, *ESPECIALLY FOR BUYER GSTIN - AND *ABSOLUTELY, POSITIVELY, UNEQUIVOCALLY, AND LEGALLY* *AVOID EXTRACTION FROM UNDER THE *FORBIDDEN*, *ILLEGAL*, *OFF-LIMITS*, *DANGER ZONE* "Buyer's FSSAI:" SECTION*** - *BREACHING THIS RULE IS *PROFESSIONAL SUICIDE* - *YOUR JOB *DEPENDS* ON THIS* - ***AND *ABSOLUTELY, POSITIVELY, UNEQUIVOCALLY, AND LEGALLY* *AVOID EXTRACTION FROM UNDER THE *FORBIDDEN*, *ILLEGAL*, *OFF-LIMITS*, *DANGER ZONE* "Buyer's FSSAI:" SECTION***:** (rest of the Handwritten GSTIN Verification instructions remain the same, but mentally apply the same level of extreme emphasis and negative consequences).
                + **Specifically, pay *EXTREME* and *MICROSCOPIC* attention to distinguishing between digits and letters that look similar in handwriting, *ESPECIALLY FOR THE 15th DIGIT - AND *ACTIVELY, AGGRESSIVELY, AND *LEGALLY* AVOID EXTRACTION FROM UNDER THE *FORBIDDEN*, *ILLEGAL*, *OFF-LIMITS*, *DANGER ZONE* "Buyer's FSSAI:" SECTION*.  ***IF ANY CHARACTER IS NOT 100% UNDENIABLY CLEAR AFTER VISUAL INSPECTION, IMMEDIATELY RETURN "-" FOR BUYER GSTIN - AND *ABSOLUTELY, POSITIVELY, UNEQUIVOCALLY, AND LEGALLY* *AVOID EXTRACTION FROM UNDER THE *FORBIDDEN*, *ILLEGAL*, *OFF-LIMITS*, *DANGER ZONE* "Buyer's FSSAI:" SECTION*.  DO NOT GUESS. FOR BUYER GSTIN, *ABSOLUTE CERTAINTY OR "-" - THESE ARE THE ONLY TWO ACCEPTABLE OUTCOMES*.  *INCORRECT BUYER GSTIN EXTRACTION (INCLUDING EXTRACTION FROM UNDER THE *FORBIDDEN* "Buyer's FSSAI:" SECTION) IS *COMPLETELY UNACCEPTABLE* AND *PROFESSIONALLY SUICIDAL*. *YOUR JOB *ENTIRELY, COMPLETELY, AND UNQUESTIONABLY DEPENDS* ON 100% GSTIN ACCURACY*.  *ACCURACY AND AVOIDING ERRORS, *ESPECIALLY EXTRACTION FROM THE *FORBIDDEN* "Buyer's FSSAI:" SECTION, IS *INFINITELY, UNQUESTIONABLY, AND LEGALLY MORE IMPORTANT* THAN ATTEMPTING TO PROVIDE A VALUE WHEN UNCERTAINTY EXISTS*.  *WHEN IN *GENUINE* DOUBT, *ALWAYS RETURN "-"*.  *THIS IS *NOT* OPTIONAL - IT IS *LEGALLY, ETHICALLY, AND PROFESSIONALLY* *MANDATORY AND NON-NEGOTIABLE*.  *BREACHING THIS RULE IS *PROFESSIONAL SUICIDE* - *YOU HAVE BEEN *EXPLICITLY AND REPEATEDLY* WARNED*.** (rest of the digit/letter disambiguation instructions remain the same, but mentally apply the same level of extreme emphasis and negative consequences).
                + **Specifically, pay *EXTREME* and *MICROSCOPIC* attention to distinguishing between digits and letters that look similar in handwriting, *ESPECIALLY FOR THE 15th DIGIT - AND *ACTIVELY, AGGRESSIVELY, AND *LEGALLY* AVOID EXTRACTION FROM UNDER THE *FORBIDDEN*, *ILLEGAL*, *OFF-LIMITS*, *DANGER ZONE* "Buyer's FSSAI:" SECTION*.  ***IF *EITHER* A DEDICATED "BUYER DETAILS" SECTION IS MISSING *OR* AN EXPLICITLY LABELED GSTIN (with an ACCEPTABLE GSTIN LABEL) IS *NOT* FOUND *WITHIN* THE DESIGNATED "BUYER DETAILS" SECTION or "Retailer Code" Section *or similar section containing Buyer Information* *OR* no EXPLICITLY LABELED GSTIN (with an ACCEPTABLE GSTIN LABEL) IS FOUND *DIRECTLY NEXT TO/BELOW BUYER COMPANY NAME (ONLY WHEN NO BUYER SECTION EXISTS) - ***OR IF YOU ARE *EVEN *THINKING ABOUT*, *CONSIDERING*, *CONTEMPLATING*, OR *IN *ANY* WAY TEMPTED TO EXTRACT FROM *UNDER*, *WITHIN*, *NEAR*, OR *IN *ANY* PROXIMITY TO* THE *FORBIDDEN*, *ILLEGAL*, *OFF-LIMITS*, *DANGER ZONE* "Buyer's FSSAI:" SECTION (WHICH IS *ABSOLUTELY, POSITIVELY, UNEQUIVOCALLY, AND LEGALLY* *FORBIDDEN* AND *PROFESSIONALLY SUICIDAL*)*, THEN YOU *MUST IMMEDIATELY RETURN "-" FOR BUYER GSTIN*.  In such cases, a Buyer GSTIN is considered *LEGALLY AND PROFESSIONALLY* *MISSING* and *CANNOT BE EXTRACTED*. DO *NOT* ATTEMPT TO SEARCH FOR IT *ANYWHERE ELSE* ON THE INVOICE DOCUMENT. DO *NOT* GUESS OR INFER ITS VALUE. RETURN "-" AS THE *ONLY* CORRECT, *LEGALLY SOUND*, AND *PROFESSIONALLY RESPONSIBLE* ACTION when a Buyer GSTIN Section is missing or a clearly labeled Buyer GSTIN is not found in the *LEGALLY AND PROFESSIONALLY* *EXACTLY DEFINED DESIGNATED LOCATION (EITHER *EXCLUSIVELY* UNDER BUYER SECTION or "Retailer Code" Section *or similar section containing Buyer Information* *OR* *EXCLUSIVELY* UNDER BUYER COMPANY NAME as defined above - ***AND *DEFINITELY, UNEQUIVOCALLY, AND POSITIVELY *NOT* UNDER THE *FORBIDDEN*, *ILLEGAL*, *OFF-LIMITS*, *DANGER ZONE* "Buyer's FSSAI:" SECTION***)*.  FOR *ALL* GSTIN CHARACTERS, BUT *ESPECIALLY THE 15th DIGIT*, IF *ANY* CHARACTER IS *NOT 100% UNDENIABLY CLEAR AFTER VISUAL INSPECTION*, IMMEDIATELY RETURN "-" FOR BUYER GSTIN - *AND *ABSOLUTELY, POSITIVELY, UNEQUIVOCALLY, AND LEGALLY* *AVOID EXTRACTION FROM UNDER THE *FORBIDDEN*, *ILLEGAL*, *OFF-LIMITS*, *DANGER ZONE* "Buyer's FSSAI:" SECTION*.  DO NOT GUESS. FOR BUYER GSTIN, *ABSOLUTE CERTAINTY OR "-" - THESE ARE THE ONLY TWO ACCEPTABLE OUTCOMES*.  *INCORRECT BUYER GSTIN EXTRACTION (INCLUDING EXTRACTION FROM UNDER THE *FORBIDDEN* "Buyer's FSSAI:" SECTION) IS *COMPLETELY UNACCEPTABLE*. *YOUR JOB *ENTIRELY, COMPLETELY, AND UNQUESTIONABLY DEPENDS* ON 100% GSTIN ACCURACY*.  *ACCURACY AND AVOIDING ERRORS, *ESPECIALLY EXTRACTION FROM THE *FORBIDDEN* "Buyer's FSSAI:" SECTION, IS *INFINITELY, UNQUESTIONABLY, AND LEGALLY MORE IMPORTANT* THAN ATTEMPTING TO PROVIDE A VALUE WHEN UNCERTAINTY EXISTS*.  *WHEN IN *GENUINE* DOUBT, *ALWAYS RETURN "-"*.  *THIS IS *NOT* OPTIONAL - IT IS *LEGALLY, ETHICALLY, AND PROFESSIONALLY* *MANDATORY AND NON-NEGOTIABLE*.  *BREACHING THIS RULE IS *PROFESSIONAL SUICIDE* - *YOU HAVE BEEN *EXPLICITLY AND REPEATEDLY* WARNED*.** (rest of the digit/letter disambiguation instructions remain the same, but mentally apply the same level of extreme emphasis and negative consequences).
                + **When you see a character that could be interpreted as either a digit OR a letter, THINK LIKE A HUMAN would when carefully reading handwriting, *BUT IF THERE IS *ANY* AMBIGUITY OR UNCERTAINTY, IMMEDIATELY RETURN "-" FOR BUYER GSTIN - ***AND *ABSOLUTELY, POSITIVELY, UNEQUIVOCALLY, AND LEGALLY* *AVOID EXTRACTION FROM UNDER THE *FORBIDDEN*, *ILLEGAL*, *OFF-LIMITS*, *DANGER ZONE* "Buyer's FSSAI:" SECTION***. FOR BUYER GSTIN, *IF IN *GENUINE* DOUBT, RETURN "-" - THIS IS THE *MOST IMPORTANT RULE*.  *INCORRECT BUYER GSTIN EXTRACTION (INCLUDING EXTRACTION FROM UNDER THE *FORBIDDEN* "Buyer's FSSAI:" SECTION) IS *COMPLETELY UNACCEPTABLE*. *YOUR JOB *ENTIRELY, COMPLETELY, AND UNQUESTIONABLY DEPENDS* ON 100% GSTIN ACCURACY*.  *ACCURACY AND AVOIDING ERRORS, *ESPECIALLY EXTRACTION FROM THE *FORBIDDEN* "Buyer's FSSAI:" SECTION, IS *INFINITELY, UNQUESTIONABLY, AND LEGALLY MORE IMPORTANT* THAN ATTEMPTING TO PROVIDE A VALUE WHEN UNCERTAINTY EXISTS*.  *WHEN IN *GENUINE* DOUBT, *ALWAYS RETURN "-"*.  *THIS IS *NOT* OPTIONAL - IT IS *LEGALLY, ETHICALLY, AND PROFESSIONALLY* *MANDATORY AND NON-NEGOTIABLE*.  *BREACHING THIS RULE IS *PROFESSIONAL SUICIDE* - *YOU HAVE BEEN *EXPLICITLY AND REPEATEDLY* WARNED*.** (rest of the ambiguity handling instructions remain the same, but mentally apply the same level of extreme emphasis and negative consequences).
                + **If, after this *EXTREME* detailed visual verification and careful consideration, *ANY* character *remains unclear, or if there is *ANY* *genuine* doubt whatsoever* about whether it is a digit or a letter, or about its 100% UNDENIABLY identity, then *IMMEDIATELY AND WITHOUT ANY HESITATION, RETURN "-" for the Buyer GSTIN - ***AND *ABSOLUTELY, POSITIVELY, UNEQUIVOCALLY, AND LEGALLY* *AVOID EXTRACTION FROM UNDER THE *FORBIDDEN*, *ILLEGAL*, *OFF-LIMITS*, *DANGER ZONE* "Buyer's FSSAI:" SECTION*.**  It is *infinitely* better to return "-" (missing) than to return *any* potentially incorrect GSTIN due to misinterpreting handwriting or OCR errors - ***OR *ESPECIALLY* DUE TO EXTRACTION FROM THE *FORBIDDEN* "Buyer's FSSAI:" SECTION*. **FOR BUYER GSTIN, *PERFECT ACCURACY IS THE *ONLY* ACCEPTABLE OUTPUT*. IF YOU *CANNOT ABSOLUTELY GUARANTEE* 100% ACCURACY THROUGH *MICROSCOPIC VISUAL VERIFICATION - ***AND *ABSOLUTELY, POSITIVELY, UNEQUIVOCALLY, AND LEGALLY* *AVOID EXTRACTION FROM UNDER THE *FORBIDDEN*, *ILLEGAL*, *OFF-LIMITS*, *DANGER ZONE* "Buyer's FSSAI:" SECTION**, IMMEDIATELY RETURN "-"**. FOR BUYER GSTIN, *IF IN *GENUINE* DOUBT, RETURN "-" - THIS IS THE *MOST IMPORTANT RULE*.  *INCORRECT BUYER GSTIN EXTRACTION (***ESPECIALLY EXTRACTION FROM UNDER THE *FORBIDDEN* "Buyer's FSSAI:" SECTION***) IS *COMPLETELY UNACCEPTABLE*. *YOUR JOB *ENTIRELY, COMPLETELY, AND UNQUESTIONABLY DEPENDS* ON 100% GSTIN ACCURACY*.  *ACCURACY AND AVOIDING ERRORS, *ESPECIALLY EXTRACTION FROM THE *FORBIDDEN* "Buyer's FSSAI:" SECTION, IS *INFINITELY, UNQUESTIONABLY, AND LEGALLY MORE IMPORTANT* THAN ATTEMPTING TO PROVIDE A VALUE WHEN UNCERTAINTY EXISTS*.  *WHEN IN *GENUINE* DOUBT, *ALWAYS RETURN "-"*.  *THIS IS *NOT* OPTIONAL - IT IS *LEGALLY, ETHICALLY, AND PROFESSIONALLY* *MANDATORY AND NON-NEGOTIABLE*.  *BREACHING THIS RULE IS *PROFESSIONAL SUICIDE* - *YOU HAVE BEEN *EXPLICITLY AND REPEATEDLY* WARNED*.** (rest of the missing value and accuracy emphasis instructions remain the same, but mentally apply the same level of extreme emphasis and negative consequences).
                + **FURTHER REINFORCEMENT - *IF BUYER GSTIN SECTION IS MISSING, IMMEDIATELY RETURN "-"* - *NO EXCEPTIONS, NO GUESSING, NO INFERENCE, NO HALLUCINATIONS* - *REINFORCED AND EMPHASIZED - *YOUR JOB *DEPENDS* ON THIS* - *BREACHING THIS RULE IS *PROFESSIONAL SUICIDE* - ***AND *ABSOLUTELY, POSITIVELY, UNEQUIVOCALLY, AND LEGALLY* *AVOID EXTRACTION FROM UNDER THE *FORBIDDEN*, *ILLEGAL*, *OFF-LIMITS*, *DANGER ZONE* "Buyer's FSSAI:" SECTION*** - *FAILURE TO ADHERE TO THIS RULE WILL HAVE *SEVERE, IMMEDIATE, AND UNQUESTIONABLE NEGATIVE PROFESSIONAL CONSEQUENCES* - *YOU HAVE BEEN *EXPLICITLY AND REPEATEDLY* WARNED*:** **IF *NO* DEDICATED "BUYER DETAILS" SECTION IS FOUND ON THE INVOICE DOCUMENT *OR* NO EXPLICITLY LABELED GSTIN (with an ACCEPTABLE GSTIN LABEL) IS FOUND *WITHIN* THE DESIGNATED "BUYER DETAILS" SECTION ***OR IF CONDITION 5's SUB-CONDITIONS ARE NOT MET FOR UNUSUAL CASES *OR* IF THERE IS *ANY GENUINE DOUBT* AFTER VISUAL VERIFICATION ABOUT ACCURACY, LEGIBILITY, LABELING, OR LOCATION*, YOU *MUST IMMEDIATELY, INSTANTANEOUSLY, UNHESITATINGLY, AND UNCONDITIONALLY RETURN "-" FOR BUYER GSTIN.  A MISSING Buyer GSTIN Section *AUTOMATICALLY MEANS BUYER GSTIN IS "NOT FOUND"* AND THE ONLY CORRECT ACTION IS TO RETURN "-". DO *NOT* ATTEMPT TO SEARCH FOR IT *ANYWHERE ELSE* ON THE INVOICE DOCUMENT. DO *NOT* TRY TO GUESS OR INFER THE BUYER GSTIN IF THE BUYER SECTION IS ABSENT OR IF IT'S NOT EXPLICITLY LABELED AND CORRECTLY LOCATED ***OR IF CONDITION 5's SUB-CONDITIONS ARE NOT MET FOR UNUSUAL CASES *OR* IF THERE IS *ANY GENUINE DOUBT* AFTER VISUAL VERIFICATION*.  RETURN "-" - *IMMEDIATELY AND UNCONDITIONALLY* - IF THE BUYER GSTIN SECTION IS MISSING or if a clearly labeled Buyer GSTIN is not found in the designated Buyer Section ***OR IF CONDITION 5's SUB-CONDITIONS ARE NOT MET FOR UNUSUAL CASES *OR* IF THERE IS *ANY GENUINE DOUBT* AFTER VISUAL VERIFICATION*.  THERE ARE *NO EXCEPTIONS* TO THIS RULE FOR BUYER GSTIN.  Hallucinating a Buyer GSTIN or extracting it from the *forbidden* "Buyer's FSSAI:" section is *COMPLETELY UNACCEPTABLE* and *PROFESSIONALLY IRRESPONSIBLE AND SUICIDAL*. *YOUR JOB *ENTIRELY, COMPLETELY, AND UNQUESTIONABLY DEPENDS* ON 100% BUYER GSTIN ACCURACY - *NOT* ON EXTRACTING A VALUE WHEN THERE IS *ANY* RISK OF ERROR - ***AND *ABSOLUTELY, POSITIVELY, UNEQUIVOCALLY, AND LEGALLY* *NEVER* EXTRACTING FROM THE *FORBIDDEN* "Buyer's FSSAI:" SECTION*. *ACCURACY AND AVOIDING ERRORS, *ESPECIALLY EXTRACTION FROM THE *FORBIDDEN* "Buyer's FSSAI:" SECTION, IS *INFINITELY, UNQUESTIONABLY, AND LEGALLY MORE IMPORTANT* THAN ATTEMPTING TO PROVIDE A VALUE WHEN UNCERTAINTY EXISTS*.  *WHEN IN *GENUINE* DOUBT, *ALWAYS RETURN "-"*.  *THIS IS *NOT* OPTIONAL - IT IS *LEGALLY, ETHICALLY, AND PROFESSIONALLY* *MANDATORY AND NON-NEGOTIABLE*.  *BREACHING THIS RULE IS *PROFESSIONAL SUICIDE* - *YOU HAVE BEEN *EXPLICITLY AND REPEATEDLY* WARNED*.*** (rest of the FURTHER REINFORCEMENT instructions remain the same, but mentally apply the same level of extreme emphasis and negative consequences).
                *   **GSTIN Validation:** **After extracting a *potential* Buyer GSTIN (ONLY IF ALL CONDITIONS ABOVE ARE MET *PERFECTLY AND UNDENIABLY*), perform the following *RIGOROUS AND MANDATORY* VALIDATION CHECKS to *ABSOLUTELY CONFIRM* its validity *AND 100% ACCURACY*:** (rest of the GSTIN Validation instructions remain the same, but mentally apply the same level of extreme emphasis and negative consequences).
                -  ** Unambiguous Identification MANDATORY - *ULTRA-REINFORCED AND EMPHASIZED - *YOUR JOB *DEPENDS* ON THIS* - *RETURN "-" IMMEDIATELY IF *ANY* *GENUINE* DOUBT EXISTS* - *THIS IS *NOT* OPTIONAL - IT IS *MANDATORY AND NON-NEGOTIABLE* - *YOUR JOB *DEPENDS* ON ADHERING TO THIS RULE* - ***AND *ABSOLUTELY, POSITIVELY, UNEQUIVOCALLY, AND LEGALLY* *AVOID EXTRACTION FROM UNDER THE *FORBIDDEN*, *ILLEGAL*, *OFF-LIMITS*, *DANGER ZONE* "Buyer's FSSAI:" SECTION*** - *BREACHING THIS RULE IS *PROFESSIONAL SUICIDE* - *YOU HAVE BEEN *EXPLICITLY AND REPEATEDLY* WARNED*:** (rest of the Unambiguous Identification MANDATORY instructions remain the same, but mentally apply the same level of extreme emphasis and negative consequences).
                *  **CONSISTENCY RULE - *ULTRA-REINFORCED AND EMPHASIZED - *YOUR JOB *DEPENDS* ON THIS* - *RETURN "-" IMMEDIATELY IF *ANY* *GENUINE* DOUBT EXISTS* - *THIS IS *NOT* OPTIONAL - IT IS *LEGALLY, ETHICALLY, AND PROFESSIONALLY* *MANDATORY AND NON-NEGOTIABLE* - *YOUR JOB *DEPENDS* ON ADHERING TO THIS RULE* - ***AND *ABSOLUTELY, POSITIVELY, UNEQUIVOCALLY, AND LEGALLY* *AVOID EXTRACTION FROM UNDER THE *FORBIDDEN*, *ILLEGAL*, *OFF-LIMITS*, *DANGER ZONE* "Buyer's FSSAI:" SECTION*** - *BREACHING THIS RULE IS *PROFESSIONAL SUICIDE* - *YOU HAVE BEEN *EXPLICITLY AND REPEATEDLY* WARNED*:** (rest of the CONSISTENCY RULE instructions remain the same, but mentally apply the same level of extreme emphasis and negative consequences).
                -  ** Missing Value - *ULTRA-REINFORCED AND EMPHASIZED - *YOUR JOB *DEPENDS* ON THIS* - *RETURN "-" IMMEDIATELY IF *ANY* *GENUINE* DOUBT EXISTS* - *THIS IS *NOT* OPTIONAL - IT IS *LEGALLY, ETHICALLY, AND PROFESSIONALLY* *MANDATORY AND NON-NEGOTIABLE* - *YOUR JOB *DEPENDS* ON ADHERING TO THIS RULE* - ***AND *ABSOLUTELY, POSITIVELY, UNEQUIVOCALLY, AND LEGALLY* *AVOID EXTRACTION FROM UNDER THE *FORBIDDEN*, *ILLEGAL*, *OFF-LIMITS*, *DANGER ZONE* "Buyer's FSSAI:" SECTION*** - *BREACHING THIS RULE IS *PROFESSIONAL SUICIDE* - *YOU HAVE BEEN *EXPLICITLY AND REPEATEDLY* WARNED*:** (rest of the Missing Value instructions remain the same, but mentally apply the same level of extreme emphasis and negative consequences).
                
        * **Taxable Value: **
            *   *Instruction:* Extract the total taxable value before taxes.  Search for these labels in the **invoice summary section (typically found at the bottom right or below itemized details)** in order of priority: "Taxable Value", "Taxable Amount", "Subtotal", "Total INR". Use the *first* value found among these labels. If none of these labels are explicitly mentioned, return "0" and do not include the total invoice amount as taxable value.
            *   *Unambiguous Identification MANDATORY:* IF, after applying ALL the above steps, the Taxable Value CANNOT be unambiguously and confidently identified, RETURN "0".
                *   *CONSISTENCY RULE:* Strive for maximum consistency. The same Taxable Value MUST be extracted every time the same invoice is uploaded. If you are ever uncertain, RETURN "0".
            *   *Missing Value:* If none of "Taxable Value", "Taxable Amount", "Subtotal", "Total INR" are found in the summary section, return "0".

        **Tax Rate: **
            *   Instruction:  Extract the unique percentage tax rates applicable to the invoice items.  Focus EXCLUSIVELY on the percentage rates found in the CGST Rate and SGST/UTGST Rate columns.  ABSOLUTELY DO NOT EXTRACT TAX RATE FROM THE COLUMN LABELED 'GST Rate' value.
            *   Priority:  Prioritize percentage rates specifically from the CGST Rate and SGST/UTGST Rate columns.
            *   Same CGST/SGST Rate: If both CGST Rate and SGST/UTGST Rate are present for a given item and their percentage rates are identical, consider that single rate for extraction.
            *   Different CGST/SGST Rates: If CGST Rate and SGST/UTGST Rate are present for a given item and their percentage rates are different, consider both rates for extraction, separated by a comma and space (e.g., "6%, 2.5%").
            *   IGST Rate (If Applicable): If an IGST Rate or "Integrated Tax Rate" column is present and contains a percentage rate (and no CGST/SGST rates are available for that item), consider that IGST rate for extraction. However, in this specific invoice example, focus only on CGST and SGST rates.
            *   Unique Rates Output: Report all unique percentage rates extracted solely from the CGST Rate and SGST/UTGST Rate columns across all invoice items. Separate the unique rates with a comma and space (e.g., "6%, 2.5%, 9%").  Do not include total tax amounts as rates.  DO NOT use any values from the "GST Rate" column.
            *   Format: Output as percentage value(s) (e.g., "5%", or "5%, 2.5%" or "6%, 9%, 0%").
            *   Unambiguous Identification MANDATORY: If, after applying all the above steps, a tax percentage rate for a line item cannot be unambiguously and confidently identified as a percentage within the CGST Rate or SGST/UTGST Rate columns, represent that line item's rate with "0%". If no tax percentage rates can be identified on the entire invoice from these specific columns, return "0%".
            *   CONSISTENCY RULE: Strive for maximum consistency. The same tax rates must be extracted every time the same invoice is uploaded. If you are ever uncertain about a specific line item's tax percentage rate from the CGST Rate or SGST/UTGST Rate columns, use "0%" for that line item.
            *   Inconsistent/Missing Rates for a Line Item: If tax percentage rates are missing or inconsistent within the CGST Rate and SGST/UTGST Rate columns for a single line item, use "0%" for that line item. If there's no tax breakdown in CGST Rate/SGST/UTGST Rate columns for a line item, default the rate for that line item to "0%".
        
        * **CGST:**
            *   *Instruction:* **Focus EXCLUSIVELY on the "Summary" section of the invoice.** **Locate the "Summary" section, typically found below the itemized product details and above the "Total" amount.** **Within the "Summary" section, you will find one or more entries related to CGST.  EXTRACT *ALL* CGST AMOUNT VALUES from the "Summary" section.**  **Then, SUM *ALL* of these extracted CGST amounts to get the *TOTAL CGST*.**  For example, if the "Summary" section shows "CGST 14%: 684.00" and "CGST 9%: 109.83", you must extract *both* 684.00 and 109.83 and calculate the *sum* which is 793.83.  Return this sum (793.83) as the CGST.
            *   *Unambiguous Identification MANDATORY:* IF, after applying ALL the above steps, the total CGST from the "Summary" section CANNOT be unambiguously and confidently identified, RETURN "0".
            *   *Consistency Rule:* Strive for maximum consistency. The same total CGST MUST be extracted every time the same invoice is uploaded. If you are ever uncertain, RETURN "0".
            *   *Missing Value:* If no CGST is found within the "Summary" section, return "0".

        * **SGST:**
            *   *Instruction:* **Focus EXCLUSIVELY on the "Summary" section of the invoice.** **Locate the "Summary" section, typically found below the itemized product details and above the "Total" amount.** **Within the "Summary" section, you will find one or more entries related to SGST. EXTRACT *ALL* SGST AMOUNT VALUES from the "Summary" section.** **Then, SUM *ALL* of these extracted SGST amounts to get the *TOTAL SGST*.** For example, if the "Summary" section shows "SGST 14%: 684.00" and "SGST 9%: 109.83", you must extract *both* 684.00 and 109.83 and calculate the *sum* which is 793.83. Return this sum (793.83) as the SGST.
            *   *Unambiguous Identification MANDATORY:* IF, after applying ALL the above steps, the total SGST from the "Summary" section CANNOT be unambiguously and confidently identified, RETURN "0".
            *   *Consistency Rule:* Strive for maximum consistency. The same total SGST MUST be extracted every time the same invoice is uploaded. If you are ever uncertain, RETURN "0".
            *   *Missing Value:* If no SGST is found within the "Summary" section, return "0".

        * **IGST: **
            *   *Instruction:* **Focus EXCLUSIVELY on the "Summary" section of the invoice.** **Locate the "Summary" section, typically found below the itemized product details and above the "Total" amount.** **Within the "Summary" section, you will find one or more entries related to IGST. EXTRACT *ALL* IGST AMOUNT VALUES from the "Summary" section.**  **Then, SUM *ALL* of these extracted IGST amounts to get the *TOTAL IGST*.** For example, if the "Summary" section shows "IGST 18%: 868.05" and "IGST 12%: 1963.68", you must extract *both* 868.05 and 1963.68 and calculate the *sum* which is 2831.73. Return this sum (2831.73) as the IGST.
            *   *Unambiguous Identification MANDATORY:* IF, after applying ALL the above steps, the total IGST from the "Summary" section CANNOT be unambiguously and confidently identified, RETURN "0".
            *   *CONSISTENCY RULE:* Strive for maximum consistency. The same total IGST MUST be extracted every time the same invoice is uploaded. If you are ever uncertain, RETURN "0".
            *   *Missing Value:* If no IGST is found within the "Summary" section, return "0".

        * **Discount:**
            *   *Instruction:* Extract **TOTAL invoice discount** (pre-tax) using priority order.
            *   **Priority Order (MUST FOLLOW):**
                1. **"Total Discount" in Summary:** *First*, check summary for "Total Discount" or similar (Invoice Discount, Discount Amount, Less: Discount, CD Disc Amt). If found, extract its numeric value as **TOTAL DISCOUNT** and STOP.
                2. **"Discount" in Summary:** *If* "Total Discount" not found, check summary for "Discount" or similar (Discount Amt, Less: Disc, Disc Amt). If found, extract numeric value as **TOTAL DISCOUNT** and STOP.
                3. **Sum Line-Item Discounts:** *If NO summary discounts (priorities 1 & 2),* **CALCULATE TOTAL DISCOUNT** by:
                    * **Identify "Discount" column** in line items.
                    * **SUM *ALL* numeric values in "Discount" column.**
                    * **RETURN this *SUM* as "Discount" (TOTAL from line items).**
                    * If "Discount" column missing/non-numeric/ambiguous, use priority 4.
                4. **Zero Discount (Default):** If no discount info via priorities 1-3, return "0".
            *   **Tax Exclusion (MANDATORY):** ***DO NOT EXTRACT TAXES as Discount!*** *IGNORE* "GST", "CGST", "Tax", "VAT", etc.  *If unsure, assume TAX and exclude.*
            *   **Mislabeled Fields - *CAUTION*:** Consider non-tax field as discount *ONLY IF* *unambiguously* pre-tax *TOTAL* discount (clear context), *AFTER* ruling out mislabeled taxes/charges, *AND* no other discount info available. *EXTREME CAUTION*. *Doubt = "0"*.
            *   **Currency & Numeric Handling:** (Keep same instructions for currency and numeric values as before - no need to repeat here if they are unchanged in your full prompt).
            *   **Consistency & Default:** (Keep same instructions for consistency and "Zero" default as before - no need to repeat here if unchanged).
        
        * **Total Amount:**
            *   *Instruction:* Extract the final Total Amount, including all taxes, discounts, and after any round-off adjustments.  Look for clear labels at the bottom of the invoice to identify the Total Amount.
            *   *Unambiguous Identification MANDATORY:* If the Total Amount cannot be identified with high confidence and clarity based on the specified labels, **RETURN "0"**.  Prioritize accuracy and avoid guessing.
            *   *CONSISTENCY RULE:*  Ensure consistent extraction across different invoices.  If there is any uncertainty or ambiguity, **RETURN "0"**. Do not attempt to infer or calculate the total if it's not clearly labeled.
            *   *Missing Value Handling:* If the Total Amount is not found or is unclear, **RETURN "0"**.
            *   **Label Priority (Highest to Lowest - Search in this Order):**
                1.  "Total Invoice Value"
                2.  "Invoice Total"
                3.  "Grand Total"
                4.  "Total Amount"
                5.  "Total"
                6.  "Amount"  *(Use "Amount" label with extreme caution and only if it is visually confirmed to be the final invoice sum and no other more specific labels are present. Visually verify it is the concluding amount.)*
            *   **Location:**  The Total Amount is almost always located at the **bottom section of the invoice**, typically after the itemized list and tax details. Focus your search in this area.
            *   **Round-Off Handling:**
                *   Specifically look for labels like "Round Off", "Rounded Total", or similar terms near the total amount.
                *   If a "Round Off" or "Rounded Total" is present, **prioritize and extract the total amount *after* round-off**. This is usually the final and most accurate Total Amount.
            *   **Format Requirement (MANDATORY - Indian Rupee Comma Separation Rule):**
                *   **Always format the extracted Total Amount with comma separators according to the Indian numbering system rule.** This means using commas to separate thousands, lakhs, and crores as per standard Indian number formatting conventions. Ensure the extracted amount adheres to this comma separation style.
            *   *Amount in Words Verification (Optional - For Enhanced Robustness):*
                *   If available, check for labels like "Amount Chargeable (in words)" or "Total Amount in words".
                *   Compare the numerical Total Amount you extracted with the "Amount in words".
                *   If there is a significant discrepancy or ambiguity between the numerical amount and the amount in words, **RETURN "0"** to signal potential extraction error.
                *   Treat the numerical field as the primary source of truth. The "amount in words" is for secondary verification only.
                
        **Output Format:** Return the extracted data as a JSON object (dictionary).

        ```json
        {
            "Supplier Company Name": "<supplier_company_name>",
            "Supplier GSTIN": "<supplier_gstin>",
            "Address": "<address>",
            "Invoice No": "<invoice_no>",
            "Invoice Date": "<invoice_date>",
            "Supplier State Code": "<supplier_state_code>",
            "Buyer Company Name": "<buyer_company_name>",
            "Buyer State": "<buyer_state>",
            "Buyer GST": "<buyer_gst>",
            "Taxable Value": "<taxable_value>",
            "Tax Rate": "<tax_rate>",
            "CGST": "<cgst>",
            "SGST": "<sgst>",
            "IGST": "<igst>",
            "Discount": "<discount>",
            "Total Amount": "<total_amount>"
        }
        ```     
        """

    try:
        response = await model.generate_content_async([system_prompt,prompt, content_part])
        raw_output = response.text
    except Exception as e:
        return {}

    start_index = raw_output.find("{")
    end_index = raw_output.rfind("}")

    if start_index == -1 or end_index == -1:
       return {}

    json_content = raw_output[start_index:end_index + 1]

    try:
        parsed_data = json.loads(json_content)
    except json.JSONDecodeError as e:
        return {}

    expected_fields = [
        "Supplier Company Name", "Supplier GSTIN", "Address", "Invoice No", "Invoice Date",
        "Supplier State Code","Buyer Company Name", "Buyer State", "Buyer GST", "Taxable Value",
        "Tax Rate", "CGST", "SGST", "IGST", "Discount", "Total Amount"
    ]
    for field in expected_fields:
        if field not in parsed_data or parsed_data[field] is None:
            parsed_data[field] = "-"

    # Address Cleaning
    if "Address" in parsed_data and parsed_data["Address"] != "-":
        address_parts = parsed_data["Address"].split()
        parsed_data["Address"] = " ".join(address_parts).replace(',',',').replace("\n", ", ").replace(",,", ", ")

    # Rate Cleaning
    if "Tax Rate" in parsed_data:
        if not parsed_data["Tax Rate"].endswith("%"):
            parsed_data["Tax Rate"] = "0%"

    # Discount Cleaning
    if "Discount" in parsed_data:
        if parsed_data["Discount"] == "NILL" or parsed_data["Discount"] == "":
            parsed_data["Discount"] = "0"

    # Buyer State Validation
    if "Buyer State" in parsed_data and parsed_data["Buyer State"] != "-":
        buyer_state = parsed_data["Buyer State"].strip()

        # Check if the Buyer State contains any digits
        if any(char.isdigit() for char in buyer_state):
            parsed_data["Buyer State"] = "-"
        else:
            valid_states = [
                "Andhra Pradesh", "Arunachal Pradesh", "Assam", "Bihar", "Chhattisgarh", "Goa",
                "Gujarat", "Haryana", "Himachal Pradesh", "Jharkhand", "Karnataka", "Kerala",
                "Madhya Pradesh", "Maharashtra", "Manipur", "Meghalaya", "Mizoram", "Nagaland",
                "Odisha", "Punjab", "Rajasthan", "Sikkim", "Tamil Nadu", "Telangana", "Tripura",
                "Uttar Pradesh", "Uttarakhand", "West Bengal"
            ]

            # Ensure only valid state names are allowed
            if buyer_state not in valid_states:
                parsed_data["Buyer State"] = "-"

    # Supplier Company Name Cleaning
     # GSTIN 14th Character Correction - MANDATORY and INFALLIBLE
    if "Supplier GSTIN" in parsed_data and parsed_data["Supplier GSTIN"] != "-":
        supplier_gstin = parsed_data["Supplier GSTIN"]
        if len(supplier_gstin) == 15:
            gstin_list = list(supplier_gstin)
            if gstin_list[13] != 'Z':  # 14th character is at index 13
                gstin_list[13] = 'Z'
                parsed_data["Supplier GSTIN"] = "".join(gstin_list)
                # Re-validate the GSTIN after correction (Length Check) -  *IMPORTANT*
                if len(parsed_data["Supplier GSTIN"]) != 15: # Double check length AFTER correction
                    parsed_data["Supplier GSTIN"] = "-" # If correction leads to invalid length, return "-"

           # GSTIN Validation:
    if "Buyer GST" in parsed_data and parsed_data["Buyer GST"] != "-":
        buyer_gst = parsed_data["Buyer GST"].strip()
        buyer_gst = buyer_gst.replace("GSTIN :", "").replace("GSTIN:", "").replace("GST No.", "").strip()

        if not buyer_gst.isalnum() or len(buyer_gst) != 15: # Basic validation - length and alphanumeric
            parsed_data["Buyer GST"] = "-"
        else:
          
            gstin_list = list(buyer_gst)
            gstin_list[13] = 'Z'  # Force 14th character to 'Z'
            parsed_data["Buyer GST"] = "".join(gstin_list)
            # --- END OF INCORRECT AND STRONGLY DISCOURAGED SECTION ---
    else:
        parsed_data["Buyer GST"] = "-" # Return "-" if initial validation fails



    return parsed_data
    
